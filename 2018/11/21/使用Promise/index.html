<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.1" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.1',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>




  
  <meta name="keywords" content="es6,promise,">


<meta name="description" content="Promiseæ˜¯ä»€ä¹ˆ,ä½¿ç”¨Promiseå…ˆçœ‹ async å’Œ await å§,ç„¶åæ··å…¥ promise ä»Promiseå¯¹è±¡çš„æ–¹æ³•å’ŒåŸå‹çš„æ–¹æ³•ä¸Šçš„è¿”å›å’Œä¼ å…¥å‚æ•°çœ‹ Promise æ˜¯ä»€ä¹ˆ, ä¸»è¦ä»‹ç» Promiseæ„é€ å‡½æ•°Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆçŠ¶æ€ï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œä»¥åŠå…¶è¿”å›çš„å€¼ã€‚ å…·ä½“æè¿°çœ‹ä¸‹é¢  ä¸‹é¢ä¸»è¦å†…å®¹æ˜¯ Promiseæ„é€ å‡½æ•°, æ„é€ å‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥åŒ…è£…è¿˜æœªæ”¯æŒpr">
<meta name="keywords" content="es6,promise">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨Promise">
<meta property="og:url" content="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/index.html">
<meta property="og:site_name" content="Little H title">
<meta property="og:description" content="Promiseæ˜¯ä»€ä¹ˆ,ä½¿ç”¨Promiseå…ˆçœ‹ async å’Œ await å§,ç„¶åæ··å…¥ promise ä»Promiseå¯¹è±¡çš„æ–¹æ³•å’ŒåŸå‹çš„æ–¹æ³•ä¸Šçš„è¿”å›å’Œä¼ å…¥å‚æ•°çœ‹ Promise æ˜¯ä»€ä¹ˆ, ä¸»è¦ä»‹ç» Promiseæ„é€ å‡½æ•°Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆçŠ¶æ€ï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œä»¥åŠå…¶è¿”å›çš„å€¼ã€‚ å…·ä½“æè¿°çœ‹ä¸‹é¢  ä¸‹é¢ä¸»è¦å†…å®¹æ˜¯ Promiseæ„é€ å‡½æ•°, æ„é€ å‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥åŒ…è£…è¿˜æœªæ”¯æŒpr">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/2.png">
<meta property="og:image" content="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/3.png">
<meta property="og:image" content="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/resolved.png">
<meta property="og:updated_time" content="2018-12-09T11:27:30.693Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä½¿ç”¨Promise">
<meta name="twitter:description" content="Promiseæ˜¯ä»€ä¹ˆ,ä½¿ç”¨Promiseå…ˆçœ‹ async å’Œ await å§,ç„¶åæ··å…¥ promise ä»Promiseå¯¹è±¡çš„æ–¹æ³•å’ŒåŸå‹çš„æ–¹æ³•ä¸Šçš„è¿”å›å’Œä¼ å…¥å‚æ•°çœ‹ Promise æ˜¯ä»€ä¹ˆ, ä¸»è¦ä»‹ç» Promiseæ„é€ å‡½æ•°Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆçŠ¶æ€ï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œä»¥åŠå…¶è¿”å›çš„å€¼ã€‚ å…·ä½“æè¿°çœ‹ä¸‹é¢  ä¸‹é¢ä¸»è¦å†…å®¹æ˜¯ Promiseæ„é€ å‡½æ•°, æ„é€ å‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥åŒ…è£…è¿˜æœªæ”¯æŒpr">
<meta name="twitter:image" content="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/2.png">






  <link rel="canonical" href="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/">


  <title>ä½¿ç”¨Promise | Little H title</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Little H title</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">this is subtitle</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>å…¬ç›Š404</a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/21/ä½¿ç”¨Promise/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ä½¿ç”¨Promise</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-11-21T10:02:01+08:00">2018-11-21</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/javascriptæ•™ç¨‹/" itemprop="url" rel="index"><span itemprop="name">javascriptæ•™ç¨‹</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Promiseæ˜¯ä»€ä¹ˆ-ä½¿ç”¨Promise"><a href="#Promiseæ˜¯ä»€ä¹ˆ-ä½¿ç”¨Promise" class="headerlink" title="Promiseæ˜¯ä»€ä¹ˆ,ä½¿ç”¨Promise"></a>Promiseæ˜¯ä»€ä¹ˆ,ä½¿ç”¨Promise</h1><p>å…ˆçœ‹ <code>async</code> å’Œ <code>await</code> å§,ç„¶åæ··å…¥ <code>promise</code></p>
<p><strong>ä»<code>Promise</code>å¯¹è±¡çš„æ–¹æ³•å’ŒåŸå‹çš„æ–¹æ³•ä¸Šçš„è¿”å›å’Œä¼ å…¥å‚æ•°çœ‹</strong></p>
<h2 id="Promise-æ˜¯ä»€ä¹ˆ-ä¸»è¦ä»‹ç»-Promiseæ„é€ å‡½æ•°"><a href="#Promise-æ˜¯ä»€ä¹ˆ-ä¸»è¦ä»‹ç»-Promiseæ„é€ å‡½æ•°" class="headerlink" title="Promise æ˜¯ä»€ä¹ˆ, ä¸»è¦ä»‹ç» Promiseæ„é€ å‡½æ•°"></a>Promise æ˜¯ä»€ä¹ˆ, ä¸»è¦ä»‹ç» Promiseæ„é€ å‡½æ•°</h2><p><strong>Promise</strong> å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ª<code>å¼‚æ­¥æ“ä½œ</code>çš„æœ€ç»ˆ<code>çŠ¶æ€</code>ï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œä»¥åŠå…¶<code>è¿”å›çš„å€¼</code>ã€‚</p>
<p>å…·ä½“æè¿°çœ‹ä¸‹é¢</p>
<blockquote>
<p>ä¸‹é¢ä¸»è¦å†…å®¹æ˜¯ Promiseæ„é€ å‡½æ•°, æ„é€ å‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥åŒ…è£…è¿˜æœªæ”¯æŒpromiseçš„å‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    resolve(<span class="string">'foo'</span>);</span><br><span class="line">  &#125;, <span class="number">300</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise1.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">  <span class="comment">// expected output: "foo"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(promise1);</span><br><span class="line"><span class="comment">// expected output: [object Promise]</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºPromise"><a href="#åˆ›å»ºPromise" class="headerlink" title="åˆ›å»ºPromise"></a>åˆ›å»ºPromise</h2><p><code>Promise</code>å¯¹è±¡æ˜¯ç”±å…³é”®å­— <code>new</code> åŠå…¶<code>æ„é€ å‡½æ•°</code>æ¥åˆ›å»ºçš„ã€‚è¯¥æ„é€ å‡½æ•°ä¼š?æŠŠä¸€ä¸ªå«åšâ€œå¤„ç†å™¨å‡½æ•°â€ï¼ˆ<code>executor function</code>ï¼‰çš„å‡½æ•°ä½œä¸ºå®ƒçš„<code>å‚æ•°</code>ã€‚è¿™ä¸ªâ€œå¤„ç†å™¨å‡½æ•°â€æ¥å—<code>ä¸¤ä¸ªå‡½æ•°</code>â€”â€”<code>resolve</code> å’Œ <code>reject</code> â€”â€”ä½œä¸ºå…¶å‚æ•°ã€‚å½“å¼‚æ­¥ä»»åŠ¡é¡ºåˆ©å®Œæˆä¸”è¿”å›ç»“æœå€¼æ—¶(å¼‚æ­¥æ“ä½œåœ¨<code>executor</code>å†…)ï¼Œä¼šè°ƒç”¨ <code>resolve</code> å‡½æ•°ï¼›è€Œå½“å¼‚æ­¥ä»»åŠ¡å¤±è´¥ä¸”è¿”å›å¤±è´¥åŸå› ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼‰æ—¶ï¼Œä¼šè°ƒç”¨<code>reject</code> å‡½æ•°ã€‚</p>
<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;...&#125; <span class="comment">/* executor */</span>  );</span><br></pre></td></tr></table></figure>
<p>å‚æ•°å°±æ˜¯ä¸€ä¸ª <code>function(resolve, reject) {...}</code> è¿™ä¸ª<code>executor</code></p>
<p><code>executor</code>æ˜¯å¸¦æœ‰ <code>resolve</code> å’Œ <code>reject</code> ä¸¤ä¸ªå‚æ•°çš„<strong>å‡½æ•°</strong> ã€‚<strong>è¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿæ˜¯å‡½æ•°</strong>. (<strong>å›è°ƒå‡½æ•°å“¦</strong>)</p>
<p><strong>Promise</strong>æ„é€ å‡½æ•°æ‰§è¡Œæ—¶ç«‹å³è°ƒç”¨ <code>executor</code> å‡½æ•°ï¼ˆ <strong>executor å‡½æ•°åœ¨Promiseæ„é€ å‡½æ•°è¿”å›æ–°å»ºå¯¹è±¡å‰è¢«è°ƒç”¨</strong>ï¼‰ï¼Œ <code>resolve</code> å’Œ <code>reject</code> ä¸¤ä¸ª<strong>å‡½æ•°</strong>ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>executor</code>ã€‚<code>executor å†…éƒ¨</code>é€šå¸¸ä¼šæ‰§è¡Œä¸€äº›<strong>å¼‚æ­¥æ“ä½œ</strong>ï¼Œ<br>ä¸€æ—¦å®Œæˆï¼Œå¯ä»¥è°ƒç”¨ <code>resolve</code> å‡½æ•°æ¥å°† <code>promise</code> çŠ¶æ€æ”¹æˆ  <code>fulfilled</code>ï¼Œæˆ–è€…åœ¨å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨<code>reject</code>å‡½æ•°å°†å®ƒçš„çŠ¶æ€æ”¹ä¸º <code>rejected</code>ã€‚ ä»è¿™é‡ŒçŸ¥é“, <strong>Promiseçš„çŠ¶æ€æ˜¯é€šè¿‡å›è°ƒå‡½æ•°<code>resolve</code>å’Œ<code>reject</code>æ”¹çš„</strong></p>
<p>å³:<code>resolve</code> å’Œ <code>reject</code> å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œåˆ†åˆ«å°† <code>promise</code> çš„çŠ¶æ€æ”¹ä¸º <code>fulfilled</code>ï¼ˆå®Œæˆï¼‰æˆ– <code>rejected</code>ï¼ˆå¤±è´¥ï¼‰ã€‚</p>
<p>å¦‚æœåœ¨ <code>executor</code> å‡½æ•°ä¸­æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆè¯¥ <code>promise</code> çŠ¶æ€ä¸º <code>rejected</code> ã€‚ <code>executor</code> å‡½æ•°çš„è¿”å›å€¼è¢«å¿½ç•¥ã€‚</p>
<blockquote>
<p>resolveå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» pending å˜ä¸ºresolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›<br>rejectå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» pending å˜ä¸ºrejectedï¼‰ï¼Œ åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</p>
</blockquote>
<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p><code>Promise</code> å¯¹è±¡æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆ<strong>ä»£ç†ä¸€ä¸ªå€¼</strong>ï¼‰ï¼Œè¢«ä»£ç†çš„<strong>å€¼</strong>åœ¨ <code>Promise</code> å¯¹è±¡<strong>åˆ›å»ºæ—¶å¯èƒ½æ˜¯æœªçŸ¥çš„</strong>(æ¯”å¦‚å¯ä»¥æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œ,ä¹Ÿå¯ä»¥ç›´æ¥æ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼, æ€»ä¹‹éƒ½ç”¨PromiseåŒ…èµ·æ¥)ã€‚</p>
<p>å®ƒ<strong>å…è®¸ä½ ä¸ºå¼‚æ­¥æ“ä½œçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šç›¸åº”çš„å¤„ç†æ–¹æ³•</strong>ï¼ˆhandlersï¼‰ã€‚ è¿™è®©å¼‚æ­¥æ–¹æ³•å¯ä»¥<strong>åƒåŒæ­¥æ–¹æ³•</strong>é‚£æ ·è¿”å›å€¼ï¼Œä½†<strong>å¹¶ä¸æ˜¯ç«‹å³è¿”å›</strong>æœ€ç»ˆæ‰§è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½<strong>ä»£è¡¨æœªæ¥å‡ºç°çš„ç»“æœ</strong>çš„ <code>promise</code> å¯¹è±¡</p>
<p>ä¸€ä¸ª <code>Promise</code> æœ‰ä»¥ä¸‹3ç§çŠ¶æ€: <strong>Promiseçš„çŠ¶æ€æ˜¯é€šè¿‡å›è°ƒå‡½æ•°<code>resolve</code>å’Œ<code>reject</code>æ”¹çš„</strong></p>
<ul>
<li><code>pending</code>: åˆå§‹çŠ¶æ€ï¼Œæ—¢ä¸æ˜¯æˆåŠŸï¼Œä¹Ÿä¸æ˜¯å¤±è´¥çŠ¶æ€ã€‚</li>
<li><code>fulfilled</code>: æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚å¯¹åº”ä»è°ƒç”¨<code>resolve</code>å‡½æ•°</li>
<li><code>rejected</code>: æ„å‘³ç€æ“ä½œå¤±è´¥ã€‚  å¯¹åº”ä»è°ƒç”¨<code>reject</code>å‡½æ•°</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š å¦‚æœä¸€ä¸ªpromiseå¯¹è±¡å¤„åœ¨fulfilledæˆ–rejectedçŠ¶æ€è€Œä¸æ˜¯pendingçŠ¶æ€ï¼Œé‚£ä¹ˆå®ƒä¹Ÿå¯ä»¥è¢«ç§°ä¸º<code>settled</code>çŠ¶æ€ã€‚</p>
</blockquote>
<p><code>pending</code> çŠ¶æ€çš„ <code>Promise</code> å¯¹è±¡å¯èƒ½è§¦å‘ <code>fulfilled</code> çŠ¶æ€å¹¶ä¼ é€’ä¸€ä¸ªå€¼ç»™ç›¸åº”çš„çŠ¶æ€å¤„ç†æ–¹æ³• <code>resolve</code> ï¼Œä¹Ÿå¯èƒ½è§¦å‘å¤±è´¥çŠ¶æ€ï¼ˆ<code>rejected</code>ï¼‰å¹¶ä¼ é€’å¤±è´¥ä¿¡æ¯ç»™ <code>reject</code>æ–¹æ³• ã€‚</p>
<blockquote>
<p>ä»è¿™é‡Œçœ‹å‡º, å…ˆæ˜¯æ‰§è¡Œç¬¬ä¸€ä¸ª<code>Promise</code>å¯¹è±¡,ç„¶åè§¦å‘å›è°ƒçš„æ–¹æ³•<code>resolve</code> <code>reject</code>, äº§ç”Ÿä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡.<br>ç„¶åğŸ‘‡ä¸‹é¢æ˜¯<code>Promise</code>å¯¹è±¡åŸå‹ä¸Šçš„æ–¹æ³•æ¥å¤„ç†(å°±ä¼šè¢«è§¦å‘è°ƒç”¨),ç”¨åˆ°<code>then</code> <code>catch</code></p>
</blockquote>
<p>å½“å…¶ä¸­ä»»ä¸€ç§æƒ…å†µå‡ºç°æ—¶ï¼Œ<code>Promise</code> å¯¹è±¡çš„ <code>then</code> æ–¹æ³•(<strong>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Promiseçš„åŸå‹ä¸Šçš„, å¹¶è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡</strong>)ç»‘å®šçš„å¤„ç†æ–¹æ³•ï¼ˆhandlers ï¼‰å°±ä¼š<strong>è¢«è°ƒç”¨</strong><br>ï¼ˆ <code>then</code> æ–¹æ³•åŒ…å«<strong>ä¸¤ä¸ªå‚æ•°,ä¹Ÿéƒ½æ˜¯å‡½æ•°</strong>ï¼š<code>onfulfilled</code> å’Œ <code>onrejected</code>ï¼Œå®ƒä»¬éƒ½æ˜¯ <code>Function</code> ç±»å‹ã€‚å½“ <code>Promise</code> çŠ¶æ€ä¸º <code>fulfilled</code> æ—¶ï¼Œè°ƒç”¨ <code>then</code> çš„ <code>onfulfilled</code> æ–¹æ³•ï¼Œå½“ <code>Promise</code> çŠ¶æ€ä¸º <code>rejected</code> æ—¶ï¼Œè°ƒç”¨ <code>then</code> çš„ <code>onrejected</code> æ–¹æ³•ï¼Œ æ‰€ä»¥åœ¨å¼‚æ­¥æ“ä½œçš„å®Œæˆå’Œç»‘å®šå¤„ç†æ–¹æ³•ä¹‹é—´ä¸å­˜åœ¨ç«äº‰ï¼‰ã€‚</p>
<blockquote>
<p>è¿™é‡Œææ‡‚, ç¬¬ä¸€ä¸ª<code>Promise</code>é€šè¿‡æ‰§è¡Œ<code>executor</code>çš„å›è°ƒå‡½æ•°<code>resolve</code> <code>reject</code>å˜ä¸ºç›¸åº”çš„<code>fulfilled</code>æˆ–<code>rejected</code>çŠ¶æ€, è¿”å›ä¸€ä¸ª<code>æ–°çš„Promise</code>å¯¹è±¡.<br>ç„¶å<code>then</code>æ–¹æ³•æ ¹æ®è¿”å›çš„<code>æ–°çš„Promise</code>å¯¹è±¡çš„<strong>çŠ¶æ€</strong>, è°ƒç”¨ç›¸åº”çš„<code>onfulfilled</code>æˆ–<code>onrejected</code>æ–¹æ³•.</p>
</blockquote>
<p>æ‰€ä»¥çŠ¶æ€æ˜¯3ç§, Promiseçš„å›è°ƒå‡½æ•°2ç§, thenæ–¹æ³•çš„å›è°ƒä¹Ÿæ˜¯2ç§</p>
<p><code>pending</code> <code>fulfilled</code> <code>rejected</code><br><code>resolve</code> <code>reject</code><br><code>onfulfilled</code> <code>onrejected</code></p>
<p>å¹³æ—¶è§åˆ°çš„ <code>then</code>å’Œ <code>catch</code> å¯ä»¥<strong>é“¾å¼è°ƒç”¨</strong>çš„åŸå› æ˜¯å› ä¸º <code>Promise.prototype.then</code> å’Œ  <code>Promise.prototype.catch</code> æ–¹æ³•è¿”å›  <code>promise</code> å¯¹è±¡</p>
<blockquote>
<p><strong>æ³¨æ„</strong>: <code>then</code>æ–¹æ³•æ˜¯åœ¨ <code>Promise</code>å¯¹è±¡çš„åŸå‹ä¸Š<code>prototype</code>çš„, <code>Promise</code>å¯¹è±¡æœ¬èº«å°±4ä¸ªæ–¹æ³•<code>resolve</code> <code>reject</code> <code>all</code> <code>race</code><br>åŸå‹ä¸Š3ä¸ª <code>then</code> <code>catch</code> <code>finally</code></p>
</blockquote>
<p><img src="2.png" alt="2.png"></p>
<h2 id="å±æ€§å’Œæ–¹æ³•-ä¸Šé¢æ¶‰åŠäº†Promiseçš„æ–¹æ³•å’ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•-å…·ä½“ä»‹ç»ä¸‹"><a href="#å±æ€§å’Œæ–¹æ³•-ä¸Šé¢æ¶‰åŠäº†Promiseçš„æ–¹æ³•å’ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•-å…·ä½“ä»‹ç»ä¸‹" class="headerlink" title="å±æ€§å’Œæ–¹æ³•(ä¸Šé¢æ¶‰åŠäº†Promiseçš„æ–¹æ³•å’ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•, å…·ä½“ä»‹ç»ä¸‹)"></a>å±æ€§å’Œæ–¹æ³•(ä¸Šé¢æ¶‰åŠäº†Promiseçš„æ–¹æ³•å’ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•, å…·ä½“ä»‹ç»ä¸‹)</h2><p>çœ‹å®Œæ–¹æ³•å’ŒåŸå‹çš„è¿”å›, åœ¨å›é¡¾å»çœ‹ä¸‹æè¿°å°±æ›´å¥½</p>
<h3 id="å±æ€§-ä¸å¸¸ç”¨-2ä¸ª"><a href="#å±æ€§-ä¸å¸¸ç”¨-2ä¸ª" class="headerlink" title="å±æ€§ ä¸å¸¸ç”¨ 2ä¸ª"></a>å±æ€§ ä¸å¸¸ç”¨ 2ä¸ª</h3><p><code>Promise.length</code> lengthå±æ€§ï¼Œå…¶å€¼æ€»æ˜¯ä¸º 1 (æ„é€ å™¨å‚æ•°çš„æ•°ç›®).</p>
<p><code>Promise.prototype</code> è¡¨ç¤º Promise æ„é€ å™¨çš„åŸå‹.</p>
<h3 id="æ–¹æ³•å’ŒåŸå‹"><a href="#æ–¹æ³•å’ŒåŸå‹" class="headerlink" title="æ–¹æ³•å’ŒåŸå‹"></a>æ–¹æ³•å’ŒåŸå‹</h3><p><code>Promise</code>çš„æ–¹æ³• 4ä¸ª, éƒ½è¿”å›<code>Promise</code>å¯¹è±¡</p>
<ol>
<li><code>Promise.resolve(value)</code>:   è¿”å›ä¸€ä¸ªçŠ¶æ€ç”±ç»™å®š<code>value</code>å†³å®šçš„<code>Promiseå¯¹è±¡</code>ã€‚<br>å¦‚æœè¯¥<code>value</code>æ˜¯ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥<code>Promise</code>å¯¹è±¡ï¼›<br>å¦‚æœè¯¥å€¼æ˜¯<code>thenable</code>(å³ï¼Œå¸¦æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡)ï¼Œè¿”å›çš„<code>Promise</code>å¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€ç”±<code>then</code>æ–¹æ³•æ‰§è¡Œå†³å®šï¼›(<strong>æ³¨æ„</strong>: åº”è¯¥æ˜¯<code>Promise.resolve</code>æ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º <code>Promise</code> å¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œ<code>thenable</code>å¯¹è±¡çš„<code>then</code>æ–¹æ³•ã€‚)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæ»´å•Šæœ‰thenæ–¹æ³•çš„å¯¹è±¡, æ‰€ä»¥</span></span><br><span class="line"><span class="keyword">let</span> thenable = &#123;</span><br><span class="line">  then: <span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve(<span class="number">42</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.resolve(thenable);  <span class="comment">// è¿™é‡Œå…ˆåŒ…è£…thenable</span></span><br><span class="line">p1.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;           <span class="comment">// è¿™é‡Œæ‰§è¡Œ, æœ€ç»ˆç»“æœ.</span></span><br><span class="line">  <span class="built_in">console</span>.log(value);  <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>å¦åˆ™çš„è¯(è¯¥<code>value</code>ä¸º<code>ç©º</code>ï¼Œ<code>åŸºæœ¬ç±»å‹</code>æˆ–è€…ä¸å¸¦<code>then</code>æ–¹æ³•çš„å¯¹è±¡),è¿”å›çš„<code>Promise</code>å¯¹è±¡çŠ¶æ€ä¸º<code>fulfilled</code>ï¼Œå¹¶ä¸”å°†è¯¥<code>value</code>ä¼ é€’ç»™å¯¹åº”çš„<code>then</code>æ–¹æ³•ã€‚<br><strong>é€šå¸¸è€Œè¨€</strong>ï¼Œå¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œä½¿ç”¨<code>Promise.resolve(value)</code> æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡,è¿™æ ·å°±èƒ½å°†è¯¥<code>value</code>ä»¥<code>Promise</code>å¯¹è±¡å½¢å¼ä½¿ç”¨ã€‚</p>
<ol>
<li><code>Promise.reject(reason)</code>:   è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºå¤±è´¥çš„<code>Promiseå¯¹è±¡</code>ï¼Œå¹¶å°†ç»™å®šçš„å¤±è´¥ä¿¡æ¯<code>reason</code>ä¼ é€’ç»™å¯¹åº”çš„å¤„ç†æ–¹æ³•<code>catch</code>ä½.(å®é™…ä¸Šåªæ˜¯ <code>then(null, ...)</code> çš„è¯­æ³•ç³–)</li>
<li><code>Promise.all(iterable)</code>:    è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡(<strong>æˆåŠŸå¯¹åº”è¿”å›resolveä¸€ä¸ªPromiseåŒ…è£…çš„æ‰€æœ‰æˆåŠŸvalueçš„æ•°ç»„, å¤±è´¥å°±è¿”å›rejectç¬¬ä¸€ä¸ªå¤±è´¥çš„é‚£ä¸ªçš„reasonä¿¡æ¯</strong>)ï¼Œè¯¥<code>promise</code>å¯¹è±¡åœ¨<code>iterable</code>å‚æ•°å¯¹è±¡é‡Œ(ä¸æ˜¯è¯´æ˜¯<code>æ•°ç»„</code>,è€Œæ˜¯è¯´è¦å…·æœ‰<code>iterable</code>æ¥å£)<code>æ‰€æœ‰çš„promise</code>å¯¹è±¡éƒ½æˆåŠŸçš„æ—¶å€™æ‰ä¼šè§¦å‘æˆåŠŸï¼Œä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ª<code>iterable</code>é‡Œé¢çš„<code>promise</code>å¯¹è±¡<code>å¤±è´¥</code>åˆ™ç«‹å³è§¦å‘è¯¥<code>promise</code>å¯¹è±¡çš„å¤±è´¥ã€‚<blockquote>
<p>è¿™ä¸ª<code>æ–°çš„promise</code>å¯¹è±¡åœ¨è§¦å‘æˆåŠŸçŠ¶æ€ä»¥åï¼Œä¼šæŠŠä¸€ä¸ªåŒ…å«<code>iterable</code>é‡Œ<code>æ‰€æœ‰promise</code>è¿”å›å€¼çš„<code>æ•°ç»„</code>ä½œä¸ºæˆåŠŸå›è°ƒçš„è¿”å›å€¼ï¼Œé¡ºåºè·Ÿ<code>iterable</code>çš„é¡ºåºä¿æŒä¸€è‡´ï¼›å¦‚æœè¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡è§¦å‘äº†<code>å¤±è´¥çŠ¶æ€</code>ï¼Œå®ƒä¼šæŠŠiterableé‡Œç¬¬ä¸€ä¸ªè§¦å‘å¤±è´¥çš„<code>promise</code>å¯¹è±¡çš„é”™è¯¯ä¿¡æ¯ä½œä¸ºå®ƒçš„å¤±è´¥é”™è¯¯ä¿¡æ¯ã€‚<code>Promise.all</code>æ–¹æ³•å¸¸è¢«ç”¨äºå¤„ç†<code>å¤šä¸ªpromise</code>å¯¹è±¡çš„çŠ¶æ€é›†åˆã€‚</p>
</blockquote>
</li>
<li><code>Promise.race(iterable)</code>:   å½“<code>iterable</code>å‚æ•°é‡Œçš„ä»»æ„ä¸€ä¸ª<code>å­promise</code>è¢«æˆåŠŸæˆ–å¤±è´¥å(å°±æ˜¯çœ‹æœ€å¿«çš„é‚£ä¸ª, <code>all</code>ç›¸å½“äºæ˜¯çœ‹æœ€æ…¢çš„)ï¼Œ<code>çˆ¶promise</code>é©¬ä¸Šä¹Ÿä¼šç”¨<code>å­promise</code>çš„æˆåŠŸè¿”å›å€¼æˆ–å¤±è´¥è¯¦æƒ…ä½œä¸ºå‚æ•°è°ƒç”¨<code>çˆ¶promise</code>ç»‘å®šçš„ç›¸åº”å¥æŸ„ï¼Œå¹¶è¿”å›è¯¥<code>promise</code>å¯¹è±¡ã€‚(<strong>æ³¨æ„</strong>:  <code>Promise.race</code> åœ¨ç¬¬ä¸€ä¸ª<code>promise</code>å¯¹è±¡å˜ä¸º<code>Fulfilled</code>ä¹‹åï¼Œå¹¶ä¸ä¼šå–æ¶ˆå…¶ä»–<code>promise</code>å¯¹è±¡çš„æ‰§è¡Œã€‚)</li>
</ol>
<p><img src="3.png" alt="3.png"></p>
<p><code>Promise</code>åŸå‹, 1ä¸ªå±æ€§, 3ä¸ªæ–¹æ³•</p>
<p>å±æ€§å°±æ˜¯åŸå‹éƒ½æœ‰çš„<code>romise.prototype.constructor</code> è¿”å›è¢«åˆ›å»ºçš„å®ä¾‹å‡½æ•°.  é»˜è®¤ä¸º <code>Promise å‡½æ•°</code></p>
<p>æ–¹æ³•å°±æ˜¯å¸¸è§çš„3ä¸ª, <code>then</code> <code>catch</code> <code>finally</code></p>
<ol>
<li><p><code>Promise.prototype.then(onFulfilled, onRejected)</code>:  æ·»åŠ è§£å†³(<code>fulfillment</code>)å’Œæ‹’ç»(<code>rejection</code>)å›è°ƒåˆ°å½“å‰ <code>promise</code>, è¿”å›ä¸€ä¸ª<code>æ–°çš„ promise</code>, å°†ä»¥å›è°ƒçš„è¿”å›å€¼æ¥<code>resolve</code>. (<code>catch</code>åªæ˜¯<code>then</code>çš„ä¸€ä¸ªç‰¹ä¾‹)</p>
</li>
<li><p><code>Promise.prototype.catch(onRejected)</code>:  æ·»åŠ ä¸€ä¸ªæ‹’ç»(<code>rejection</code>) å›è°ƒåˆ°å½“å‰ <code>promise</code>, è¿”å›ä¸€ä¸ª<code>æ–°çš„promise</code>ã€‚å½“è¿™ä¸ªå›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œ<code>æ–° promise</code> å°†ä»¥å®ƒçš„è¿”å›å€¼æ¥<code>resolve</code>ï¼Œå¦åˆ™å¦‚æœå½“å‰<code>promise</code> è¿›å…¥<code>fulfilled</code>çŠ¶æ€ï¼Œåˆ™ä»¥å½“å‰<code>promise</code>çš„å®Œæˆç»“æœä½œä¸ºæ–°<code>promise</code>çš„å®Œæˆç»“æœ.<strong>æ³¨æ„è¿™ä¸ªä¹Ÿæ˜¯è¿”å›ä¸€ä¸ªPromise, å½“æˆ<code>then</code>åªæœ‰ç¬¬2ä¸ªå‚æ•°æ—¶å‘—</strong></p>
</li>
<li><p><code>Promise.prototype.finally(onFinally)</code>: æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†å›è°ƒäºå½“å‰<code>promise</code>å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨<code>åŸpromise</code>å¯¹è±¡è§£æå®Œæ¯•åï¼Œè¿”å›ä¸€ä¸ª<code>æ–°çš„promise</code>å¯¹è±¡ã€‚å›è°ƒä¼šåœ¨å½“å‰<code>promise</code>è¿è¡Œå®Œæ¯•åè¢«è°ƒç”¨ï¼Œæ— è®º<code>å½“å‰promise</code>çš„çŠ¶æ€æ˜¯å®Œæˆ(<code>fulfilled</code>)è¿˜æ˜¯å¤±è´¥(<code>rejected</code>)</p>
</li>
</ol>
<p><img src="resolved.png" alt="resolved.png"></p>
<p>å…³äº<code>Symbol(Symbol.toStringTag): &quot;Promise&quot;</code>çš„çŸ¥è¯†, çœ‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag" target="_blank" rel="noopener">Symbol.toStringTag</a></p>
<h2 id="æ€»ç»“-çœ‹ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ"><a href="#æ€»ç»“-çœ‹ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ" class="headerlink" title="æ€»ç»“ : çœ‹ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ"></a>æ€»ç»“ : çœ‹<a href="https://juejin.im/post/5af29a62f265da0b8f628973" target="_blank" rel="noopener">ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ</a></h2><p><strong>Promise</strong> å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ª<code>å¼‚æ­¥æ“ä½œ</code>çš„æœ€ç»ˆ<code>çŠ¶æ€</code>ï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œä»¥åŠå…¶<code>è¿”å›çš„å€¼</code>ã€‚</p>
<p><code>Promise</code>ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯å¦‚æœæ•°æ®å°±ç»ª(<code>settled</code>)ï¼Œé‚£ä¹ˆ(<code>then</code>)åšç‚¹ä»€ä¹ˆã€‚</p>
<p><code>Promise</code>æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯<code>resolve</code>å’Œ<code>reject</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>)&#123;</span><br><span class="line">    resolve(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li><code>resolve</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» <code>pending</code> å˜ä¸º<code>fulfilled</code>ï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸º<code>å‚æ•°</code>ä¼ é€’å‡ºå»ï¼›</li>
<li><code>reject</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» <code>pending</code> å˜ä¸º<code>rejected</code>ï¼‰ï¼Œ åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸º<code>å‚æ•°</code>ä¼ é€’å‡ºå»ã€‚</li>
</ol>
<p><code>Promise</code>å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨<code>then</code>æ–¹æ³•åˆ†åˆ«æŒ‡å®š<code>resolved</code>çŠ¶æ€å’Œ<code>rejected</code>çŠ¶æ€çš„<code>å›è°ƒå‡½æ•°</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ç«‹å³<code>resolve</code>çš„ <code>Promise</code> å¯¹è±¡ï¼Œæ˜¯åœ¨<strong>æœ¬è½®</strong>â€œäº‹ä»¶å¾ªç¯â€ï¼ˆ<code>event loop</code>ï¼‰çš„ç»“æŸæ—¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'three'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'two'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'one'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// one</span></span><br><span class="line"><span class="comment">// two</span></span><br><span class="line"><span class="comment">// three</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>setTimeout(fn, 0)</code>åœ¨<strong>ä¸‹ä¸€è½®</strong>â€œäº‹ä»¶å¾ªç¯â€å¼€å§‹æ—¶æ‰§è¡Œï¼Œ<code>Promise. resolve()</code>åœ¨<strong>æœ¬è½®</strong>â€œäº‹ä»¶å¾ªç¯â€ç»“æŸæ—¶æ‰§è¡Œï¼Œ<code>console.log(&#39;one&#39;)</code>åˆ™æ˜¯<strong>ç«‹å³æ‰§è¡Œ</strong>ï¼Œå› æ­¤æœ€å…ˆè¾“å‡ºã€‚</p>
<p><strong>ç‰¹åˆ«è¯´æ˜</strong>ï¼šå¦‚æœéœ€è¦<code>resolve()</code>å¾€åä¼ é€’<strong>å¤šä¸ª</strong>å‚æ•°ï¼Œä¸èƒ½ç›´æ¥å†™<code>resolve(a1,a2,a3)</code>ï¼Œè¿™æ ·åªèƒ½æ‹¿åˆ°ç¬¬ä¸€ä¸ªè¦ä¼ çš„å‚æ•°ï¼Œéœ€è¦ä»¥æ•°ç»„æˆ–å¯¹è±¡å»ä¼ é€’</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">a1</span>:a1,<span class="attr">a2</span>:a2,<span class="attr">a3</span>:a3&#125;;</span><br><span class="line">resolve(obj)</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="keyword">let</span> arr =[a1,a2,a3];</span><br><span class="line">resolve(arr);</span><br></pre></td></tr></table></figure>
<p>Promiseçš„é“¾è¿˜åœä¸äº†è¯¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œæ˜¯è¿”å›ä¸€ä¸ªpendingçŠ¶æ€çš„Promise</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>è™½ç„¶ä¸Šé¢å¯ä»¥åœä½, ä½†ä¼šå¯¼è‡´å†…å­˜æ³„æ¼,æ¯•ç«Ÿä¸€ç›´åœä½äº†, ä¸é‡Šæ”¾å†…å­˜.</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises" target="_blank" rel="noopener">ä½¿ç”¨ Promises</a><br><a href="http://es6.ruanyifeng.com/?search=import&amp;x=0&amp;y=0#docs/promise" target="_blank" rel="noopener">é˜®ä¸€å³°es6 Promise å¯¹è±¡</a></p>
<p>è¿›é˜¶<br><a href="https://juejin.im/post/5af29a62f265da0b8f628973" target="_blank" rel="noopener">ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ</a><br><a href="https://juejin.im/post/5a58551ef265da3e51330a8e" target="_blank" rel="noopener">å¯¹PromiseçŠ¶æ€çš„ç†è§£å’ŒåŸºæœ¬ç”¨æ³•</a><br><a href="https://github.com/xieranmaya/blog/issues/5" target="_blank" rel="noopener">ä»å¦‚ä½•åœæ‰ Promise é“¾è¯´èµ·</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/es6/" rel="tag"># es6</a>
          
            <a href="/tags/promise/" rel="tag"># promise</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/11/05/CSSå®ç°æ°´å¹³å‚ç›´å±…ä¸­çš„ç¬¬10ç§æ–¹å¼å—/" rel="next" title="CSSå®ç°æ°´å¹³å‚ç›´å±…ä¸­çš„ç¬¬10ç§æ–¹å¼">
                <i class="fa fa-chevron-left"></i> CSSå®ç°æ°´å¹³å‚ç›´å±…ä¸­çš„ç¬¬10ç§æ–¹å¼
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/23/ç»Ÿä¸€ä»£ç é£æ ¼editorconfig/" rel="prev" title="ç»Ÿä¸€ä»£ç é£æ ¼editorconfig">
                ç»Ÿä¸€ä»£ç é£æ ¼editorconfig <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatarMogu.jpg" alt="Henry x">
            
              <p class="site-author-name" itemprop="name">Henry x</p>
              <p class="site-description motion-element" itemprop="description">this is description</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">65</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">79</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yourname" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yourname@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://example.com/" title="weibo" target="_blank">weibo</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Promiseæ˜¯ä»€ä¹ˆ-ä½¿ç”¨Promise"><span class="nav-number">1.</span> <span class="nav-text">Promiseæ˜¯ä»€ä¹ˆ,ä½¿ç”¨Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Promise-æ˜¯ä»€ä¹ˆ-ä¸»è¦ä»‹ç»-Promiseæ„é€ å‡½æ•°"><span class="nav-number">1.1.</span> <span class="nav-text">Promise æ˜¯ä»€ä¹ˆ, ä¸»è¦ä»‹ç» Promiseæ„é€ å‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ›å»ºPromise"><span class="nav-number">1.2.</span> <span class="nav-text">åˆ›å»ºPromise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¯­æ³•"><span class="nav-number">1.3.</span> <span class="nav-text">è¯­æ³•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æè¿°"><span class="nav-number">1.4.</span> <span class="nav-text">æè¿°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å±æ€§å’Œæ–¹æ³•-ä¸Šé¢æ¶‰åŠäº†Promiseçš„æ–¹æ³•å’ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•-å…·ä½“ä»‹ç»ä¸‹"><span class="nav-number">1.5.</span> <span class="nav-text">å±æ€§å’Œæ–¹æ³•(ä¸Šé¢æ¶‰åŠäº†Promiseçš„æ–¹æ³•å’ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•, å…·ä½“ä»‹ç»ä¸‹)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å±æ€§-ä¸å¸¸ç”¨-2ä¸ª"><span class="nav-number">1.5.1.</span> <span class="nav-text">å±æ€§ ä¸å¸¸ç”¨ 2ä¸ª</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ–¹æ³•å’ŒåŸå‹"><span class="nav-number">1.5.2.</span> <span class="nav-text">æ–¹æ³•å’ŒåŸå‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ€»ç»“-çœ‹ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ"><span class="nav-number">1.6.</span> <span class="nav-text">æ€»ç»“ : çœ‹ä½ çœŸçš„å®Œå…¨æŒæ¡äº†promiseä¹ˆï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‚è€ƒ"><span class="nav-number">1.7.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Henry x</span>

  

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.1"></script>



  



	





  





  










  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  

</body>
</html>
