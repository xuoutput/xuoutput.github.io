---
title: jsç«‹å³æ‰§è¡Œå‡½æ•°
date: 2019-02-17 16:52:02
tags:
- IIFE
categories:
- javascriptæ•™ç¨‹
comments: false
permalink:
---

# jsç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼

IIFEï¼ˆ ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼‰æ˜¯ä¸€ä¸ª**åœ¨å®šä¹‰æ—¶å°±ä¼šç«‹å³æ‰§è¡Œçš„**  `JavaScript` å‡½æ•°ã€‚

è¿™æ˜¯ä¸€ä¸ªè¢«ç§°ä¸º `è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°` çš„**è®¾è®¡æ¨¡å¼**ï¼Œä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ã€‚
ç¬¬ä¸€éƒ¨åˆ†æ˜¯åŒ…å›´åœ¨ `åœ†æ‹¬å·è¿ç®—ç¬¦()` é‡Œçš„**ä¸€ä¸ªåŒ¿åå‡½æ•°**ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°**æ‹¥æœ‰ç‹¬ç«‹çš„è¯æ³•ä½œç”¨åŸŸ**ã€‚è¿™ä¸ä»…é¿å…äº†å¤–ç•Œè®¿é—®æ­¤ IIFE ä¸­çš„å˜é‡ï¼Œè€Œä¸”åˆä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚

ç¬¬äºŒéƒ¨åˆ†**å†ä¸€æ¬¡ä½¿ç”¨** `()` åˆ›å»ºäº†ä¸€ä¸ª**ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼**ï¼ŒJavaScript å¼•æ“åˆ°æ­¤**å°†ç›´æ¥æ‰§è¡Œå‡½æ•°**ã€‚

**å½“å‡½æ•°å˜æˆç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶**ï¼Œè¡¨è¾¾å¼ä¸­çš„å˜é‡ä¸èƒ½ä»å¤–éƒ¨è®¿é—®ã€‚

```JavaScript
(function () {
    var name = "Barry";
})();
// å¤–éƒ¨ä¸èƒ½è®¿é—®å˜é‡ name
name // undefined
```

å°† IIFE åˆ†é…ç»™ä¸€ä¸ªå˜é‡ï¼Œä¸æ˜¯å­˜å‚¨ IIFE æœ¬èº«ï¼Œè€Œæ˜¯å­˜å‚¨ IIFE æ‰§è¡Œåè¿”å›çš„ç»“æœã€‚

```JavaScript
var result = (function () {
    var name = "Barry";
    return name;
})();
// IIFE æ‰§è¡Œåè¿”å›çš„ç»“æœï¼š
result; // "Barry"
```

## æè¿°

ç«‹å³æ‰§è¡Œå‡½æ•°é€šå¸¸æœ‰ä¸‹é¢ä¸¤ç§å†™æ³•ï¼š

```JavaScript
(function(){ 
   ...
})();
(function(){ 
    ...
}());
```

åœ¨Javascriptä¸­ï¼Œä¸€å¯¹åœ†æ‹¬å·â€œ`()`â€æ˜¯ä¸€ç§è¿ç®—ç¬¦ï¼Œè·Ÿåœ¨å‡½æ•°åä¹‹åï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥å‡½æ•°ã€‚æ¯”å¦‚ï¼Œ`print()`å°±è¡¨ç¤ºè°ƒç”¨`printå‡½æ•°`ã€‚

è¿™ä¸ªå†™æ³•å’Œæˆ‘ä»¬æƒ³è±¡çš„å†™æ³•ä¸ä¸€æ ·ï¼ˆçŸ¥é“çš„äººå½“ç„¶å·²ç»ä¹ ä»¥ä¸ºå¸¸ï¼‰
å¾ˆå¤šäººåˆšå¼€å§‹ç†è§£**ç«‹å³æ‰§è¡Œå‡½æ•°**çš„æ—¶å€™ï¼Œè§‰å¾—åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

```JavaScript
function (){ ... }();

//æˆ–è€…

function fName(){ ... }();
```

ç„¶è€Œäº‹å®å´æ˜¯è¿™æ ·ï¼š`SyntaxError: Unexpected token (`ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

## è§£é‡Š

è¦ç†è§£ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œéœ€è¦å…ˆç†è§£ä¸€äº›**å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µ**ï¼š`å‡½æ•°å£°æ˜`ã€`å‡½æ•°è¡¨è¾¾å¼`,å› ä¸ºæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°é€šå¸¸éƒ½æ˜¯é€šè¿‡è¿™ä¸¤ç§æ–¹å¼

**å‡½æ•°å£°æ˜ (function è¯­å¥)**:

```JavaScript
function name([param[, param[, ... param]]]) {
   statements
}
```

`name`ï¼šå‡½æ•°åï¼›
`param`ï¼šè¢«ä¼ å…¥å‡½æ•°çš„å‚æ•°çš„åç§°,ä¸€ä¸ªå‡½æ•°æœ€å¤šå¯ä»¥æœ‰255ä¸ªå‚æ•°ï¼›
`statements`ï¼šè¿™äº›è¯­å¥ç»„æˆäº†å‡½æ•°çš„å‡½æ•°ä½“ã€‚

**å‡½æ•°è¡¨è¾¾å¼ (function expression)**:

å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜éå¸¸ç±»ä¼¼,å®ƒä»¬ç”šè‡³æœ‰ç›¸åŒçš„è¯­æ³•ã€‚

```JavaScript
function [name]([param] [, param] [..., param]) {
   statements
}
```

`name`ï¼šå‡½æ•°å,å¯ä»¥çœç•¥,**çœç•¥å‡½æ•°åçš„è¯,è¯¥å‡½æ•°å°±æˆä¸ºäº†åŒ¿åå‡½æ•°**ï¼›
`param`ï¼šè¢«ä¼ å…¥å‡½æ•°çš„å‚æ•°çš„åç§°,ä¸€ä¸ªå‡½æ•°æœ€å¤šå¯ä»¥æœ‰255ä¸ªå‚æ•°ï¼›
`statements`ï¼šè¿™äº›è¯­å¥ç»„æˆäº†å‡½æ•°çš„å‡½æ•°ä½“ã€‚

ä¸‹é¢æˆ‘ä»¬ç»™å‡ºä¸€äº›æ —å­è¯´æ˜ï¼š

```JavaScript
// å£°æ˜å‡½æ•°f1
function f1() {
    console.log("f1");
}
// é€šè¿‡()æ¥è°ƒç”¨æ­¤å‡½æ•°
f1();


//ä¸€ä¸ªåŒ¿åå‡½æ•°çš„å‡½æ•°è¡¨è¾¾å¼ï¼Œè¢«èµ‹å€¼ç»™å˜é‡f2:
var f2 = function() {
    console.log("f2");
}
//é€šè¿‡()æ¥è°ƒç”¨æ­¤å‡½æ•°
f2();


//ä¸€ä¸ªå‘½åä¸ºf3çš„å‡½æ•°çš„å‡½æ•°è¡¨è¾¾å¼(è¿™é‡Œçš„å‡½æ•°åå¯ä»¥éšæ„å‘½åï¼Œå¯ä»¥ä¸å¿…å’Œå˜é‡f3é‡å)ï¼Œè¢«èµ‹å€¼ç»™å˜é‡f3:
var f3 = function f3() {
    console.log("f3");
}
//é€šè¿‡()æ¥è°ƒç”¨æ­¤å‡½æ•°
f3();
```

ä¸Šé¢æ‰€èµ·çš„ä½œç”¨éƒ½å·®ä¸å¤šï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›**å·®åˆ«**

1ã€**å‡½æ•°åå’Œå‡½æ•°çš„å˜é‡å­˜åœ¨ç€å·®åˆ«**ã€‚å‡½æ•°åä¸èƒ½è¢«æ”¹å˜ï¼Œä½†å‡½æ•°çš„å˜é‡å´èƒ½å¤Ÿè¢«å†åˆ†é…ã€‚å‡½æ•°ååªèƒ½åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ã€‚å€˜è‹¥åœ¨å‡½æ•°ä½“å¤–ä½¿ç”¨å‡½æ•°åå°†ä¼šå¯¼è‡´é”™è¯¯ï¼š

```JavaScript
var y = function x() {};
alert(x); // throws an erro
```

2ã€å‡½æ•°å£°æ˜å®šä¹‰çš„å‡½æ•°å¯ä»¥åœ¨å®ƒè¢«å£°æ˜ä¹‹å‰ä½¿ç”¨

```JavaScript
foo(); // alerts FOO!
function foo() {
   alert('FOO!');
}
```

**ä½†å‡½æ•°å£°æ˜éå¸¸å®¹æ˜“ï¼ˆç»å¸¸æ˜¯æ„å¤–åœ°ï¼‰è½¬æ¢ä¸ºå‡½æ•°è¡¨è¾¾å¼**ã€‚å½“å®ƒä¸å†æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼š

1. **æˆä¸º`è¡¨è¾¾å¼`çš„ä¸€éƒ¨åˆ†**, ä¸å•å•æ˜¯ç”¨()æ‹¬å·, è¿˜æœ‰å…¶ä»–æ“ä½œç¬¦å’Œä¸€äº›è¯­å¥ä¸­.
2. ä¸åœ¨æ˜¯å‡½æ•°æˆ–è€…scriptè‡ªèº«çš„â€œæºå…ƒç´ â€ ï¼ˆsource elementï¼‰ã€‚åœ¨scriptæˆ–è€…å‡½æ•°ä½“å†…â€œæºå…ƒç´ â€å¹¶éæ˜¯å†…åµŒçš„è¯­å¥ï¼ˆstatementï¼‰**æœ‰ç‚¹éš¾æ‡‚**

```JavaScript
var x = 0;               // source element
if (x == 0) {            // source element
   x = 10;               // ésource element
   function boo() {}     // é source element
}
function foo() {         // source element
   var y = 20;           // source element
   function bar() {}     // source element
   while (y == 10) {     // source element
      function blah() {} // é source element
      y++;               //ésource element
   }
}
```

ğŸŒ°æ —å­:
> ç®€å•ç‚¹çœ‹å°±åˆ¤æ–­æ˜¯ä¸æ˜¯`function`å¼€å¤´

```JavaScript
// å‡½æ•°å£°æ˜
function foo() {}

// å‡½æ•°è¡¨è¾¾å¼, åœ¨æ‹¬å·ä¸­
(function bar() {})

// å‡½æ•°è¡¨è¾¾å¼, èµ‹å€¼è¯­å¥
x = function hello() {}

// åœ¨é€»è¾‘è¯­å¥ä¸­
if (x) {
   // å‡½æ•°è¡¨è¾¾å¼
   function world() {}
}


// å‡½æ•°å£°æ˜
function a() {
   // å‡½æ•°å£°æ˜
   function b() {}
   if (0) {
      //å‡½æ•°è¡¨è¾¾å¼
      function c() {}
   }
}
```

ç°åœ¨æˆ‘ä»¬æ¥è§£é‡Šä¸Šé¢çš„`SyntaxError: Unexpected token (`ï¼š

**äº§ç”Ÿè¿™ä¸ªé”™è¯¯çš„åŸå› **æ˜¯ï¼ŒJavascriptå¼•æ“çœ‹åˆ°`function`å…³é”®å­—ä¹‹åï¼Œè®¤ä¸ºåé¢è·Ÿçš„æ˜¯å‡½æ•°å®šä¹‰è¯­å¥ï¼Œä¸åº”è¯¥ä»¥åœ†æ‹¬å·ç»“å°¾ã€‚
**è§£å†³æ–¹æ³•**å°±æ˜¯è®©å¼•æ“çŸ¥é“ï¼Œåœ†æ‹¬å·å‰é¢çš„éƒ¨åˆ†ä¸æ˜¯å‡½æ•°å®šä¹‰è¯­å¥ï¼Œè€Œæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥å¯¹æ­¤è¿›è¡Œè¿ç®—ã€‚æ‰€ä»¥åº”è¯¥è¿™æ ·å†™ï¼š

```JavaScript
(function(){ /* code */ })();

// æˆ–è€…
(function(){ /* code */ }());   // è¿™ä¸ªæ˜¯ç¬¬äºŒç§å§
```

è¿™ä¸¤ç§å†™æ³•**éƒ½æ˜¯ä»¥åœ†æ‹¬å·å¼€å¤´**ï¼Œå¼•æ“å°±ä¼šè®¤ä¸ºåé¢è·Ÿçš„**æ˜¯ä¸€ä¸ªè¡¨ç¤ºå¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å®šä¹‰**ï¼Œæ‰€ä»¥å°±é¿å…äº†é”™è¯¯ã€‚è¿™å°±å«åšâ€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ï¼ˆ`Immediately-Invoked Function Expression`ï¼‰ï¼Œç®€ç§°IIFEã€‚

> æ³¨æ„ï¼Œä¸Šé¢çš„ä¸¤ç§å†™æ³•çš„ç»“å°¾ï¼Œéƒ½å¿…é¡»åŠ ä¸Šåˆ†å·ã€‚

æ¨è€Œå¹¿ä¹‹ï¼Œä»»ä½•è®©è§£é‡Šå™¨ä»¥è¡¨è¾¾å¼æ¥å¤„ç†å‡½æ•°å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½èƒ½äº§ç”ŸåŒæ ·çš„æ•ˆæœï¼Œæ¯”å¦‚ä¸‹é¢ä¸‰ç§å†™æ³•ã€‚

```JavaScript
var i = function(){ return 10; }();

true && function(){ /* code */ }();

0, function(){ /* code */ }();
```

ç”šè‡³åƒè¿™æ ·å†™ï¼š

```JavaScript
!function(){ /* code */ }();

~function(){ /* code */ }();

-function(){ /* code */ }();

+function(){ /* code */ }();
```

newå…³é”®å­—ä¹Ÿèƒ½è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼š

```JavaScript
new function(){ /* code */ }

new function(){ /* code */ }() // åªæœ‰ä¼ é€’å‚æ•°æ—¶ï¼Œæ‰éœ€è¦æœ€åé‚£ä¸ªåœ†æ‹¬å·ã€‚
```

## ä½¿ç”¨

é‚£æˆ‘ä»¬é€šå¸¸ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°ç«‹å³è¡¨è¾¾å¼å‘¢ï¼Œä»¥åŠæˆ‘å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ

**é€šå¸¸æƒ…å†µä¸‹ï¼Œåªå¯¹åŒ¿åå‡½æ•°ä½¿ç”¨è¿™ç§â€œç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼â€**ã€‚
å®ƒçš„ç›®çš„æœ‰ä¸¤ä¸ªï¼š

- ä¸€æ˜¯ä¸å¿…ä¸ºå‡½æ•°å‘½åï¼Œé¿å…äº†æ±¡æŸ“å…¨å±€å˜é‡ï¼›
- äºŒæ˜¯IIFEå†…éƒ¨å½¢æˆäº†ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå¯ä»¥å°è£…ä¸€äº›å¤–éƒ¨æ— æ³•è¯»å–çš„ç§æœ‰å˜é‡ã€‚

```JavaScript
// å†™æ³•ä¸€
var tmp = newData;
processData(tmp);
storeData(tmp);

// å†™æ³•äºŒ
(function (){
  var tmp = newData;
  processData(tmp);
  storeData(tmp);
}());
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ**å†™æ³•äºŒæ¯”å†™æ³•ä¸€æ›´å¥½ï¼Œå› ä¸ºå®Œå…¨é¿å…äº†æ±¡æŸ“å…¨å±€å˜é‡**ã€‚

æœ€ååœ¨ä¸¾ä¸€ä¸ªçœŸå®çš„æ —å­ï¼šåœ¨JavaScriptçš„`OOP`ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡IIFEæ¥å®ç°ä¸€ä¸ªå•ä¾‹(å…³äºå•ä¾‹çš„ä¼˜åŒ–ä¸å†æ­¤å¤„è®¨è®º)

```JavaScript
// åˆ›å»ºä¸€ä¸ªç«‹å³è°ƒç”¨çš„åŒ¿åå‡½æ•°è¡¨è¾¾å¼
// returnä¸€ä¸ªå˜é‡ï¼Œå…¶ä¸­è¿™ä¸ªå˜é‡é‡ŒåŒ…å«ä½ è¦æš´éœ²çš„ä¸œè¥¿
// è¿”å›çš„è¿™ä¸ªå˜é‡å°†èµ‹å€¼ç»™counterï¼Œè€Œä¸æ˜¯å¤–é¢å£°æ˜çš„functionè‡ªèº«

var counter = (function () {
    var i = 0;

    return {
        get: function () {
            return i;
        },
        set: function (val) {
            i = val;
        },
        increment: function () {
            return ++i;
        }
    };
} ());

// counteræ˜¯ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªå±æ€§çš„å¯¹è±¡ï¼Œä¸Šé¢çš„ä»£ç å¯¹äºå±æ€§çš„ä½“ç°å…¶å®æ˜¯æ–¹æ³•

counter.get(); // 0
counter.set(3);
counter.increment(); // 4
counter.increment(); // 5

counter.i; // undefined å› ä¸ºiä¸æ˜¯è¿”å›å¯¹è±¡çš„å±æ€§
i; // å¼•ç”¨é”™è¯¯: i æ²¡æœ‰å®šä¹‰ï¼ˆå› ä¸ºiåªå­˜åœ¨äºé—­åŒ…ï¼‰
```

## åœ†æ‹¬å·è¿ç®—ç¬¦

[è¿›å‡»çš„ JavaScriptï¼ˆäº”ï¼‰ ä¹‹ ç«‹å³æ‰§è¡Œå‡½æ•°ä¸é—­åŒ… 666](https://segmentfault.com/a/1190000015644558)

åœ†æ‹¬å·è¿ç®—ç¬¦ä¹Ÿå«**åˆ†ç»„è¿ç®—ç¬¦**ï¼Œå®ƒæœ‰ä¸¤ç§ç”¨æ³•ï¼šå¦‚æœè¡¨è¾¾å¼æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œä½œç”¨æ˜¯**æ±‚å€¼**ï¼›å¦‚æœè·Ÿåœ¨å‡½æ•°åé¢ï¼Œä½œç”¨æ˜¯**è°ƒç”¨å‡½æ•°**

æŠŠè¡¨è¾¾å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå°†è¿”å›è¡¨è¾¾å¼çš„å€¼

```JavaScript
console.log((1+2)); // 3
```

**å°†å‡½æ•°æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œä¼šè¿”å›å‡½æ•°æœ¬èº«**ã€‚å¦‚æœåœ†æ‹¬å·ç´§è·Ÿåœ¨å‡½æ•°çš„åé¢ï¼Œå°±è¡¨ç¤ºè°ƒç”¨å‡½æ•°ï¼Œå³å¯¹å‡½æ•°æ±‚å€¼

```JavaScript
console.log((function testa(){return 666;}));
// function testa(){return 666;}

console.log(function testa(){return 666;}());
// 666
```

æ³¨æ„:åœ†æ‹¬å·è¿ç®—ç¬¦**ä¸èƒ½ä¸ºç©º**ï¼Œå¦åˆ™ä¼šæŠ¥é”™

```JavaScript
();//SyntaxError: Unexpected token )
```

ç”±äºåœ†æ‹¬å·çš„ä½œç”¨æ˜¯æ±‚å€¼ï¼Œå¦‚æœå°†è¯­å¥æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¯­å¥æ²¡æœ‰è¿”å›å€¼

```JavaScript
(var a = function(){return 666});
// SyntaxError: Unexpected token var
```

## IIFE

åœ¨ Javascript ä¸­ï¼Œåœ†æ‹¬å·`()`æ˜¯ä¸€ç§**è¿ç®—ç¬¦**ï¼Œè·Ÿåœ¨å‡½æ•°åä¹‹åï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥å‡½æ•°ã€‚æ¯”å¦‚ï¼Œ`print()`å°±è¡¨ç¤ºè°ƒç”¨`printå‡½æ•°`ã€‚

æœ‰æ—¶ï¼Œæˆ‘ä»¬**éœ€è¦åœ¨å®šä¹‰å‡½æ•°ä¹‹åï¼Œç«‹å³è°ƒç”¨è¯¥å‡½æ•°**ã€‚è¿™æ—¶ï¼Œä½ ä¸èƒ½åœ¨å‡½æ•°çš„å®šä¹‰ä¹‹ååŠ ä¸Šåœ†æ‹¬å·ï¼Œè¿™ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯ã€‚

```JavaScript
function(){ /* code */ }();
// SyntaxError: Unexpected token (
```

äº§ç”Ÿè¿™ä¸ª**é”™è¯¯çš„åŸå› **æ˜¯ï¼Œ`function`è¿™ä¸ªå…³é”®å­—**æ—¢å¯ä»¥å½“ä½œè¯­å¥ï¼Œä¹Ÿå¯ä»¥å½“ä½œè¡¨è¾¾å¼**ã€‚

```JavaScript
// è¯­å¥
function f() {}

// è¡¨è¾¾å¼
var f = function f() {}
```

ä¸ºäº†**é¿å…è§£æä¸Šçš„æ­§ä¹‰**ï¼ŒJavaScript å¼•æ“è§„å®šï¼Œå¦‚æœ`functionå…³é”®å­—`å‡ºç°åœ¨**è¡Œé¦–**ï¼Œ**ä¸€å¾‹è§£é‡Šæˆè¯­å¥**ã€‚å› æ­¤ï¼ŒJavaScriptå¼•æ“çœ‹åˆ°è¡Œé¦–æ˜¯`functionå…³é”®å­—`ä¹‹åï¼Œè®¤ä¸ºè¿™ä¸€æ®µéƒ½æ˜¯å‡½æ•°çš„å®šä¹‰ï¼Œä¸åº”è¯¥ä»¥åœ†æ‹¬å·ç»“å°¾ï¼Œ**æ‰€ä»¥å°±æŠ¥é”™äº†**ã€‚

**è§£å†³æ–¹æ³•**å°±æ˜¯ä¸è¦è®©`function`å‡ºç°åœ¨è¡Œé¦–ï¼Œè®©å¼•æ“å°†å…¶ç†è§£æˆä¸€ä¸ªè¡¨è¾¾å¼ã€‚**æœ€ç®€å•çš„å¤„ç†**ï¼Œå°±æ˜¯å°†å…¶æ”¾åœ¨ä¸€ä¸ªåœ†æ‹¬å·é‡Œé¢ã€‚

```JavaScript
(function(){ /* code */ }());
// æˆ–è€…
(function(){ /* code */ })();
```

ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½æ˜¯ä»¥`åœ†æ‹¬å·`å¼€å¤´ï¼Œå¼•æ“å°±ä¼šè®¤ä¸ºåé¢è·Ÿçš„**æ˜¯ä¸€ä¸ªè¡¨ç¤ºå¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å®šä¹‰è¯­å¥**ï¼Œæ‰€ä»¥å°±é¿å…äº†é”™è¯¯ã€‚è¿™å°±å«åšâ€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ï¼ˆ`Immediately-Invoked Function Expression`ï¼‰ï¼Œç®€ç§° `IIFE`ã€‚

æ³¨æ„ï¼Œä¸Šé¢ä¸¤ç§å†™æ³•æœ€åçš„**åˆ†å·éƒ½æ˜¯å¿…é¡»**çš„ã€‚å¦‚æœçœç•¥åˆ†å·ï¼Œé‡åˆ°è¿ç€ä¸¤ä¸ª IIFEï¼Œå¯èƒ½å°±ä¼šæŠ¥é”™ã€‚

```JavaScript
// æŠ¥é”™
(function(){ /* code */ }())
(function(){ /* code */ }())
```

ä¸Šé¢ä»£ç çš„ä¸¤è¡Œä¹‹é—´æ²¡æœ‰åˆ†å·ï¼Œ`JavaScript` ä¼šå°†å®ƒä»¬**è¿åœ¨ä¸€èµ·è§£é‡Šï¼Œå°†ç¬¬äºŒè¡Œè§£é‡Šä¸ºç¬¬ä¸€è¡Œçš„å‚æ•°**ã€‚

**æ¨è€Œå¹¿ä¹‹**ï¼Œä»»ä½•è®©è§£é‡Šå™¨ä»¥**è¡¨è¾¾å¼**æ¥å¤„ç†å‡½æ•°å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½èƒ½äº§ç”ŸåŒæ ·çš„æ•ˆæœï¼Œæ¯”å¦‚ä¸‹é¢ä¸‰ç§å†™æ³•ã€‚

```JavaScript
var i = function(){ return 10; }();
true && function(){ /* code */ }();
0, function(){ /* code */ }();
```

## è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°å’Œç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼åŒºåˆ«

[æ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ4ï¼‰ï¼šç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ 6666](https://www.cnblogs.com/TomXu/archive/2011/12/31/2289423.html)

åœ¨è¿™ç¯‡å¸–å­é‡Œï¼Œæˆ‘ä»¬ä¸€ç›´å«**è‡ªæ‰§è¡Œå‡½æ•°**ï¼Œç¡®åˆ‡çš„è¯´æ˜¯`è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°`ï¼ˆ`Self-executing anonymous function`ï¼‰ï¼Œä½†è‹±æ–‡åŸæ–‡ä½œè€…ä¸€ç›´å€¡è®®ä½¿ç”¨ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆ`Immediately-Invoked Function Expression`ï¼‰è¿™ä¸€åç§°ï¼Œä½œè€…åˆä¸¾äº†ä¸€å †ä¾‹å­æ¥è§£é‡Šï¼Œå¥½å§ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š

```JavaScript
// è¿™æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œçš„å‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨æ‰§è¡Œè‡ªèº«ï¼Œé€’å½’
function foo() { foo(); }

// è¿™æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œå› ä¸ºæ²¡æœ‰æ ‡ç¤ºåç§°
// å¿…é¡»ä½¿ç”¨arguments.calleeå±æ€§æ¥æ‰§è¡Œè‡ªå·±
var foo = function () { arguments.callee(); };

// è¿™å¯èƒ½ä¹Ÿæ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œä»…ä»…æ˜¯fooæ ‡ç¤ºåç§°å¼•ç”¨å®ƒè‡ªèº«
// å¦‚æœä½ å°†fooæ”¹å˜æˆå…¶å®ƒçš„ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªused-to-self-executeåŒ¿åå‡½æ•°
var foo = function () { foo(); };

// æœ‰äº›äººå«è¿™ä¸ªæ˜¯è‡ªæ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼ˆå³ä¾¿å®ƒä¸æ˜¯ï¼‰ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è°ƒç”¨è‡ªèº«ï¼Œå®ƒåªæ˜¯ç«‹å³æ‰§è¡Œè€Œå·²ã€‚
(function () { /* code */ } ());

// ä¸ºå‡½æ•°è¡¨è¾¾å¼æ·»åŠ ä¸€ä¸ªæ ‡ç¤ºåç§°ï¼Œå¯ä»¥æ–¹ä¾¿Debug
// ä½†ä¸€å®šå‘½åäº†ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸å†æ˜¯åŒ¿åçš„äº†
(function foo() { /* code */ } ());

// ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ä¹Ÿå¯ä»¥è‡ªæ‰§è¡Œï¼Œä¸è¿‡å¯èƒ½ä¸å¸¸ç”¨ç½¢äº†
(function () { arguments.callee(); } ());
(function foo() { foo(); } ());

// å¦å¤–ï¼Œä¸‹é¢çš„ä»£ç åœ¨é»‘è“5é‡Œæ‰§è¡Œä¼šå‡ºé”™ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªå‘½åçš„å‡½æ•°è¡¨è¾¾å¼é‡Œï¼Œä»–çš„åç§°æ˜¯undefined
// å‘µå‘µï¼Œå¥‡æ€ª
(function foo() { foo(); } ());
```

å¸Œæœ›è¿™é‡Œçš„ä¸€äº›ä¾‹å­ï¼Œå¯ä»¥è®©å¤§å®¶æ˜ç™½ï¼Œä»€ä¹ˆå«**è‡ªæ‰§è¡Œ**ï¼Œä»€ä¹ˆå«**ç«‹å³è°ƒç”¨**ã€‚

> æ³¨ï¼š`arguments.callee`åœ¨`ECMAScript 5 strict mode`é‡Œ**è¢«åºŸå¼ƒäº†**ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œå…¶å®æ˜¯ä¸èƒ½ç”¨çš„ã€‚


## å‚è€ƒ

[IIFE](https://developer.mozilla.org/zh-CN/docs/Glossary/%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F)
[JavaScriptä¸­çš„ç«‹å³æ‰§è¡Œå‡½æ•° 666](https://segmentfault.com/a/1190000003902899)
[é˜®ä¸€å³° IIFE 666666](http://javascript.ruanyifeng.com/grammar/function.html#toc23)
[[è¯‘] JavaScriptï¼šç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰666](https://segmentfault.com/a/1190000003985390)
[è¿›å‡»çš„ JavaScriptï¼ˆäº”ï¼‰ ä¹‹ ç«‹å³æ‰§è¡Œå‡½æ•°ä¸é—­åŒ… 666](https://segmentfault.com/a/1190000015644558)
[æ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ4ï¼‰ï¼šç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ 6666](https://www.cnblogs.com/TomXu/archive/2011/12/31/2289423.html)