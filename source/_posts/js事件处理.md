---
title: js事件处理
date: 2018-12-28 17:35:51
tags:
- javascript
- 事件处理
categories:
- javascript教程
comments: false
permalink:
---

# js事件处理

客户端js程序采用了异步事件驱动编程模型(有介绍, 搞个链接). 在这种程序设计风格下, 当文档, 浏览器, 元素或**与之相关的对象**发生某些有趣的事情时, web浏览器就会产生事件(`event`).

例如: 当web浏览器加载完文档, 用户把鼠标指针移到超链接上或敲击键盘时, web浏览器都会产生事件. 如果js应用程序关注特定类型的事件, 那么他可以注册当这类事件发生时要调用的一个或多个函数.

> 注意: 这种风格并不止应用于web编程, 所有使用图形用户界面的应用程序都采用了它, 他们静待某些事情发生(即, 它们等待事件发生), 然后它们响应.

事件就是web浏览器通知应用程序发生了什么事情. 事件不是js对象, 不会出现在程序源代码中. 当然, **会有一些事件相关的对象出现在源代码中**, 他们需要技术说明.

**事件类型(`event type`)**是一个用来说明发生什么类型事件的字符串.
例如: `mousemove`表示用户鼠标移动, `keydown`表示键盘上某个键被按下, 而`load`表示文档(或某个其他资源)从网络上加载完毕.
由于事件类型只是一个字符串, 因此实际上**有时会称之为事件名字**(`event name`), 我们用这个名字来标识所谈论的特定类型的事件.

**事件目标(`event target`)**是发生的**事件**或与之相关的**对象**.当将事件时, 我们必须同时指明类型(`type, name`)和目标(`target`).

例如: `window`上的`load`事件或`<button>`元素的`click`事件. 在客户端的js应用程序中, `Window`, `Document`和`Element`对象是最常见的事件目标, 但某些事件是由其他类型的对象触发.比如`XMLHttpRequest`对象触发的`readystatechange`事件.

**事件处理程序**`event handle`或**事件监听程序**(`event listener`)是处理或响应事件的函数. 应用程序通过指明事件类型`type`和事件目标`target`, 在web浏览器中注册他们的事件处理程序`handle, listener`. 当在特定的目标上发生特定类型的事件时, 浏览器会调用对应的处理程序. 当对象上注册的事件处理程序被调用时, 我们有时会说浏览器"触发"(`fire, trigger`)和"派发"(`dispatch`)了事件. 有很多注册事件处理程序的方法.

**事件对象(`event object`)**是与特定事件相关且包含有关该**事件详细信息的对象**. 事件对象`object`**作为参数**传递给事件处理程序函数`handle`. 所有的事件对象`object`都有用来指定事件类型的`type`属性和指定事件目标的`target`属性. 每个事件类型都为其相关事件对象`object`定义一组属性.
例如: 鼠标事件的相关对象会包含鼠标指针的坐标, 而键盘事件的相关对象会包含按下的键和辅助键的详细信息. 许多事件类型仅定义了像`type`和`target`这样少量的标准属性, 就无法获取许多其他有用的信息.

**事件传播(`event propagation`)**是**浏览器决定哪个对象触**发其事件处理程序的过程. 对于单个对象的特定事件(比如`Window`对象的`load`事件), 必须是不能传播的. 当文档元素上发生某个类型的事件时, 然而, 他们会在文档树上向上传播或"冒泡(`bubble`)", 如果用户移动鼠标指针到超链接上, 在定义这个链接的`<a>`元素上首先会触发`mousemove`事件, 然后是在这个容器元素上触发这个时间, 也许是`<p>`元素,`<div>`元素或`Document`对象本身. 有时, 在`Document`或其他容器元素上注册单个事件处理程序比在每个独立的目标元素上都注册程序要更方便. 事件处理程序能通过调用方法或设置事件对象属性来阻止事件传播, 这样它就能停止冒泡且将无法在容器元素上触发处理程序.

事件传播的另外一种形式称之为**事件捕获(`event capturing`)**, 在容器元素上注册的特定处理程序有机会在事件传播倒真实目标之前拦截(或"捕获")它., 但是,当处理鼠标拖放事件时, 捕获或"夺取"鼠标时间的能力是必须的.

一些事件有与之相关的默认操作. 例如: 当超链接上发生`click`事件时, 浏览器的默认操作是按照链接加载新页面. 事件处理程序可以通过返回一个适当的值, 调用时间对象的某个方法或设置事件对象的某个属性来阻止默认操作的发生. 这有时称为"取消"事件.











