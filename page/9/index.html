<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.1" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.1',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>




  
  <meta name="keywords" content="Hexo, NexT">


<meta name="description" content="this is description">
<meta property="og:type" content="website">
<meta property="og:title" content="Little H title">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="Little H title">
<meta property="og:description" content="this is description">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Little H title">
<meta name="twitter:description" content="this is description">






  <link rel="canonical" href="http://yoursite.com/page/9/">


  <title>Little H title</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Little H title</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">this is subtitle</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益404</a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/19/ubuntu上安装软件方法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/19/ubuntu上安装软件方法/" itemprop="url">ubuntu上安装软件方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-19T09:43:55+08:00">2018-04-19</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ubuntu上安装软件方法"><a href="#ubuntu上安装软件方法" class="headerlink" title="ubuntu上安装软件方法"></a>ubuntu上安装软件方法</h1><h2 id="总结下来就是有3种"><a href="#总结下来就是有3种" class="headerlink" title="总结下来就是有3种"></a>总结下来就是有3种</h2><ol>
<li>使用<code>sudo apt-get</code></li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search package 搜索包</span><br><span class="line">apt-cache show package 获取包的相关信息，如说明、大小、版本等</span><br><span class="line"></span><br><span class="line">sudo apt-get install package 安装包</span><br><span class="line">sudo apt-get remove package 删除包</span><br></pre></td></tr></table></figure>
<ol>
<li>使用<code>dpkg</code></li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> dpkg -i &lt;package.deb&gt;</span><br><span class="line">安装一个 Debian 软件包，如你手动下载的文件，（其中-i等价于--install）</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> dpkg -c &lt;package.deb&gt;</span><br><span class="line">列出&lt;package.deb&gt; 的内容中包含的文件结构（其中-c等价于--contents）</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> dpkg - I&lt;package.deb&gt;</span><br><span class="line">从&lt;package.deb&gt; 中提取包裹信息的详细信息，包括软件名称. 版本以及大小等（其中-I等价于--info）</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> dpkg -r &lt;package&gt;</span><br><span class="line">移除一个已安装的包裹（软件名称可通过dpkg -I命令查看，其中-r等价于--remove）</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> dpkg -P &lt;package&gt;</span><br><span class="line">完全清除一个已安装的包裹。和 remove 不同的是，remove 只是删掉数据和可执行文件，purge 另外还删除所有的配制文件。</span><br></pre></td></tr></table></figure>
<ol>
<li>解压缩<code>.tar.gz</code>的直接运行</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">解压：$ tar -xzvf &lt;FileName.tar.gz&gt;</span><br><span class="line">压缩：$ tar -czvf &lt;FileName.tar.gz DirName&gt;</span><br><span class="line">-c: 建立压缩档案</span><br><span class="line">-x：解压</span><br><span class="line"></span><br><span class="line">-z：有gzip属性的</span><br><span class="line">-v：显示所有过程</span><br><span class="line">-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。</span><br></pre></td></tr></table></figure>
<h2 id="apt-get"><a href="#apt-get" class="headerlink" title="apt-get"></a>apt-get</h2><p>常用的APT命令参数<br>　　apt-cache search package 搜索包<br>　　apt-cache show package 获取包的相关信息，如说明、大小、版本等</p>
<p>　　sudo apt-get install package 安装包<br>　　sudo apt-get install package — reinstall 重新安装包<br>　　sudo apt-get -f install 修复安装”-f = —fix-missing”<br>　　sudo apt-get remove package 删除包<br>　　sudo apt-get remove package — purge 删除包，包括删除配置文件等<br>　　sudo apt-get update 更新源<br>　　sudo apt-get upgrade 更新已安装的包<br>　　sudo apt-get dist-upgrade 升级系统<br>　　sudo apt-get dselect-upgrade 使用 dselect 升级</p>
<p>　　apt-cache depends package 了解使用依赖<br>　　apt-cache rdepends package 是查看该包被哪些包依赖</p>
<p>　　sudo apt-get build-dep package 安装相关的编译环境<br>　　apt-get source package 下载该包的源代码<br>　　sudo apt-get clean &amp;&amp; sudo apt-get autoclean 清理无用的包<br>　　sudo apt-get check 检查是否有损坏的依赖<br>　　其中：<br>　　1 有sudo的表示需要管理员特权！<br>　　2 在UBUNTU中命令后面参数为短参数是用“-”引出，长参数用“—”引出<br>　　3 命令帮助信息可用man 命令的方式查看或者<br>　　命令 -H（—help）方式查看<br>　　4 在man命令中需要退出命令帮助请按“q”键！！<br>　　选项 含义 作用<br>　　sudo -h Help 列出使用方法，退出。<br>　　sudo -V Version 显示版本信息，并退出。<br>　　sudo -l List 列出当前用户可以执行的命令。只有在sudoers里的用户才能使用该选项。<br>　　sudo -u username|#uid User 以指定用户的身份执行命令。后面的用户是除root以外的，可以是用户名，也可以是#uid。<br>　　sudo -k Kill 清除“入场卷”上的时间，下次再使用sudo时要再输入密码。<br>　　sudo -K Sure kill 与-k类似，但是它还要撕毁“入场卷”，也就是删除时间戳文件。<br>　　sudo -b command Background 在后台执行指定的命令。<br>　　sudo -p prompt command Prompt 可以更改询问密码的提示语，其中%u会代换为使用者帐号名称，%h会显示主机名称。非常人性化的设计<br>　　sudo -e file Edit 不是执行命令，而是修改文件，相当于命令sudoedit。</p>
<h2 id="dpkg"><a href="#dpkg" class="headerlink" title="dpkg"></a>dpkg</h2><pre><code>1. dpkg -i &lt;package.deb&gt;
安装一个 Debian 软件包，如你手动下载的文件，（其中-i等价于--install）

2. dpkg -c &lt;package.deb&gt;
列出&lt;package.deb&gt; 的内容中包含的文件结构（其中-c等价于--contents）

3. dpkg - I&lt;package.deb&gt;
从&lt;package.deb&gt; 中提取包裹信息的详细信息，包括软件名称. 版本以及大小等（其中-I等价于--info）

4. dpkg -r &lt;package&gt;
移除一个已安装的包裹（软件名称可通过dpkg -I命令查看，其中-r等价于--remove）

5. dpkg -P &lt;package&gt;
完全清除一个已安装的包裹。和 remove 不同的是，remove 只是删掉数据和可执行文件，purge 另外还删除所有的配制文件。

6. dpkg -L &lt;package&gt;
列出 &lt;package&gt; 安装的软件包安装的所有文件（软件名称可通过dpkg -I命令查看，其中-L等价于--listfiles）

7. dpkg -l &lt;package&gt;
查看&lt;package&gt;软件包的信息（软件名称可通过dpkg -I命令查看，其中-l等价于--list）

8. dpkg -s &lt;package&gt;
显示已安装包裹的详细信息。同时请看 apt-cache 显示 Debian 存档中的包裹信息，以及 dpkg -I 来显示从一个 .deb 文件中提取的包裹信息。（软件名称可通过dpkg -I命令查看，其中-s等价于--status）

9. dpkg-reconfigure &lt;package&gt;
重新配制一个已经安装的包裹，如果它使用的是 debconf (debconf 为包裹安装提供了一个统一的配制界面)。
</code></pre><h2 id="tar-gz"><a href="#tar-gz" class="headerlink" title=".tar.gz"></a>.tar.gz</h2><ol>
<li>.tar.gz的先tar -x</li>
</ol>
<p>tar<br>-c: 建立压缩档案<br>-x：解压<br>-t：查看内容<br>-r：向压缩归档文件末尾追加文件<br>-u：更新原压缩包中的文件<br>这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。</p>
<p>-z：有gzip属性的<br>-j：有bz2属性的<br>-Z：有compress属性的<br>-v：显示所有过程<br>-O：将文件解开到标准输出</p>
<p>下面的参数-f是必须的</p>
<p>-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。</p>
<p>$ tar -cf all.tar *.jpg<br>这条命令是将所有.jpg的文件打成一个名为all.tar的包。-c是表示产生新的包，-f指定包的文件名。 </p>
<p>$ tar -rf all.tar *.gif<br>这条命令是将所有.gif的文件增加到all.tar的包里面去。-r是表示增加文件的意思。 </p>
<p>$ tar -uf all.tar logo.gif<br>这条命令是更新原来tar包all.tar中logo.gif文件，-u是表示更新文件的意思。 </p>
<p>$ tar -tf all.tar<br>这条命令是列出all.tar包中所有文件，-t是列出文件的意思 </p>
<p>$ tar -xf all.tar<br>这条命令是解出all.tar包中所有文件，-x是解开的意思 </p>
<p>压缩<br>tar –cvf jpg.tar <em>.jpg //将目录里所有jpg文件打包成tar.jpg<br>tar –czf jpg.tar.gz </em>.jpg   //将目录里所有jpg文件打包成jpg.tar后，并且将其用gzip压缩，生成一个gzip压缩过的包，命名为jpg.tar.gz<br>tar –cjf jpg.tar.bz2 <em>.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用bzip2压缩，生成一个bzip2压缩过的包，命名为jpg.tar.bz2<br>tar –cZf jpg.tar.Z </em>.jpg   //将目录里所有jpg文件打包成jpg.tar后，并且将其用compress压缩，生成一个umcompress压缩过的包，命名为jpg.tar.Z<br>rar a jpg.rar <em>.jpg //rar格式的压缩，需要先下载rar for Linux<br>zip jpg.zip </em>.jpg //zip格式的压缩，需要先下载zip for linux</p>
<p>解压<br>tar –xvf file.tar //解压 tar包<br>tar -xzvf file.tar.gz //解压tar.gz<br>tar -xjvf file.tar.bz2   //解压 tar.bz2<br>tar –xZvf file.tar.Z   //解压tar.Z<br>unrar e file.rar //解压rar<br>unzip file.zip //解压zip</p>
<p>总结</p>
<ol>
<li>*.tar 用 tar –xvf 解压</li>
<li>*.gz 用 gzip -d或者gunzip 解压</li>
<li><strong>*.tar.gz和*.tgz 用 tar –xzvf 解压</strong></li>
<li>*.bz2 用 bzip2 -d或者用bunzip2 解压</li>
<li>*.tar.bz2用tar –xjf 解压</li>
<li>*.Z 用 uncompress 解压</li>
<li>*.tar.Z 用tar –xZf 解压</li>
<li>*.rar 用 unrar e解压</li>
<li>*.zip 用 unzip 解压</li>
</ol>
<p>一般使用tar -xzvf  tar -czvf</p>
<p>01-.tar格式<br>解包：[＊＊＊＊＊＊＊]$ tar xvf FileName.tar<br>打包：[＊＊＊＊＊＊＊]$ tar cvf FileName.tar DirName（注：tar是打包，不是压缩！）<br>02-.gz格式<br>解压1：[＊＊＊＊＊＊＊]$ gunzip FileName.gz<br>解压2：[＊＊＊＊＊＊＊]$ gzip -d FileName.gz<br>压 缩：[＊＊＊＊＊＊＊]$ gzip FileName</p>
<p><strong>03-.tar.gz格式</strong><br><strong>解压：[＊＊＊＊＊＊＊]$ tar -zxvf FileName.tar.gz</strong><br><strong>压缩：[＊＊＊＊＊＊＊]$ tar -zcvf FileName.tar.gz DirName</strong></p>
<p>04-.bz2格式<br>解压1：[＊＊＊＊＊＊＊]$ bzip2 -d FileName.bz2<br>解压2：[＊＊＊＊＊＊＊]$ bunzip2 FileName.bz2<br>压 缩： [＊＊＊＊＊＊＊]$ bzip2 -z FileName</p>
<p>05-.tar.bz2格式<br>解压：[＊＊＊＊＊＊＊]$ tar jxvf FileName.tar.bz2<br>压缩：[＊＊＊＊＊＊＊]$ tar jcvf FileName.tar.bz2 DirName</p>
<p>06-.bz格式<br>解压1：[＊＊＊＊＊＊＊]$ bzip2 -d FileName.bz<br>解压2：[＊＊＊＊＊＊＊]$ bunzip2 FileName.bz</p>
<p>07-.tar.bz格式<br>解压：[＊＊＊＊＊＊＊]$ tar jxvf FileName.tar.bz</p>
<p>08-.Z格式<br>解压：[＊＊＊＊＊＊＊]$ uncompress FileName.Z<br>压缩：[＊＊＊＊＊＊＊]$ compress FileName</p>
<p>09-.tar.Z格式<br>解压：[＊＊＊＊＊＊＊]$ tar Zxvf FileName.tar.Z<br>压缩：[＊＊＊＊＊＊＊]$ tar Zcvf FileName.tar.Z DirName</p>
<p>10-.tgz格式<br>解压：[＊＊＊＊＊＊＊]$ tar zxvf FileName.tgz</p>
<p>11-.tar.tgz格式<br>解压：[＊＊＊＊＊＊＊]$ tar zxvf FileName.tar.tgz<br>压缩：[＊＊＊＊＊＊＊]$ tar zcvf FileName.tar.tgz FileName</p>
<p>12-.zip格式<br>解压：[＊＊＊＊＊＊＊]$ unzip FileName.zip<br>压缩：[＊＊＊＊＊＊＊]$ zip FileName.zip DirName</p>
<p>13-.lha格式<br>解压：[＊＊＊＊＊＊＊]$ lha -e FileName.lha<br>压缩：[＊＊＊＊＊＊＊]$ lha -a FileName.lha FileName</p>
<p>14-.rar格式<br>解压：[＊＊＊＊＊＊＊]$ rar a FileName.rar<br>压缩：[＊＊＊＊＊＊＊]$ rar e FileName.rar<br>rar请到：下载！<br>解压后请将rar_static拷贝到/usr/bin目录（其他由$PATH环境变量<br>指定的目录也行）：[＊＊＊＊＊＊＊]$ cp rar_static /usr/bin/rar</p>
<h2 id="这样的要在把东西解压到-usr-local中-然后"><a href="#这样的要在把东西解压到-usr-local中-然后" class="headerlink" title="这样的要在把东西解压到/usr/local中 然后"></a>这样的要在把东西解压到/usr/local中 然后</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar  -xzvf node-v5.10.1-linux-x64.tar.gz  /usr/local/</span><br><span class="line">cd /usr/local/</span><br><span class="line">sudo mv node-v5.10.1-linux-x64/ nodejs</span><br><span class="line">sudo ln -s /usr/local/nodejs/bin/node /usr/local/bin</span><br><span class="line">sudo ln -s /usr/local/nodejs/bin/npm /usr/local/bin</span><br></pre></td></tr></table></figure>
<p>还有一种</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">下载完安装包，并解压 tgz（以下演示的是 <span class="number">64</span> 位 Linux上的安装） 。</span><br><span class="line"></span><br><span class="line">curl -O https:<span class="comment">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.6.tgz    # 下载</span></span><br><span class="line">tar -zxvf mongodb-linux-x86_64<span class="number">-3.0</span><span class="number">.6</span>.tgz                                   # 解压</span><br><span class="line"></span><br><span class="line">mv  mongodb-linux-x86_64<span class="number">-3.0</span><span class="number">.6</span>/ /usr/local/mongodb                         # 将解压包拷贝到指定目录</span><br><span class="line"></span><br><span class="line">MongoDB 的可执行文件位于 bin 目录下，所以可以将其添加到 PATH 路径中：就是全局环境变量.window上那种</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> PATH=&lt;mongodb-install-directory&gt;/bin:$PATH</span><br><span class="line"><span class="keyword">export</span> PATH=/usr/local/mongodb/bin:$PATH</span><br><span class="line">&lt;mongodb-install-directory&gt; 为你 MongoDB 的安装路径。如本文的 /usr/local/mongodb 。</span><br></pre></td></tr></table></figure>
<p>上面的重启就没了 怎么永久<br><a href="https://www.cnblogs.com/lihao-blog/p/6945040.html" target="_blank" rel="noopener">https://www.cnblogs.com/lihao-blog/p/6945040.html</a><br>source /etc/profile后只在一个终端中有效<br><a href="https://www.cnblogs.com/tomato0906/articles/6048383.html" target="_blank" rel="noopener">https://www.cnblogs.com/tomato0906/articles/6048383.html</a><br><a href="https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=143895" target="_blank" rel="noopener">https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=143895</a></p>
<p><a href="http://liuzhijun.iteye.com/blog/1744465" target="_blank" rel="noopener">http://liuzhijun.iteye.com/blog/1744465</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/18/vscode上插件/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/18/vscode上插件/" itemprop="url">vscode上插件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-18T18:45:50+08:00">2018-04-18</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="vscode上插件"><a href="#vscode上插件" class="headerlink" title="vscode上插件"></a>vscode上插件</h1><h2 id="setting-sync"><a href="#setting-sync" class="headerlink" title="setting sync"></a>setting sync</h2><p>Settings Sync这个插件可以通过github上面的gist来同步你的vscode的配置包括插件,自定义按键设置。还能够分享给别人使用。主要用在换电脑.</p>
<ol>
<li>首先当然是下载vscode 然后安装Setting Sync</li>
</ol>
<p><img src="1.jpg" alt="1"></p>
<ol>
<li>按ctrl+shift+p 填入sync可以看到所有命令</li>
</ol>
<p><img src="2.jpg" alt="2"></p>
<ol>
<li><p>然后选择update的 快捷键是alt+shift+u</p>
</li>
<li><p>会弹出一个github的登录页,登录有进入Developer settings =&gt; personal access token.这里设置好gist, 然后会生成一个token</p>
</li>
</ol>
<p><img src="3.jpg" alt="3"></p>
<ol>
<li><p>再按下alt+shift+u就输入好了,最后会上传上去,然后就是得到一个token和gist ID .</p>
</li>
<li><p>使用备份就是下载好vscode之后, 安装Setting Sync, 然后按ctrl+shif+p 搜sync 选download.(快捷键 alt+shift+d 当然同上),然后输入token在gist ID . 插件下载要等一会 </p>
</li>
<li><p>不行的话 reset下 有个Reset Extension Setting</p>
</li>
</ol>
<p>总结下:</p>
<ol>
<li>先去自己的github中的personal access token中获取token</li>
<li>在使用alt+shift+u上传,这里使用token,得到gist ID</li>
<li>使用这个备份,alt+shift+d,一次输入token和gist ID, 然后就是等待下载咯.</li>
</ol>
<p>比如<br>GitHub Token: 234e5dc413b0b00f7073698c945b116d82fa2951<br>GitHub Gist: 347db9e402bbc26b2ebbeddbabc46be1<br>GitHub Gist Type: Secret</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/数据结构中的常用算法总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/数据结构中的常用算法总结/" itemprop="url">数据结构中的常用算法总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-15T23:18:18+08:00">2018-04-15</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据结构中的常用算法总结"><a href="#数据结构中的常用算法总结" class="headerlink" title="数据结构中的常用算法总结"></a>数据结构中的常用算法总结</h1><p>首先介绍4个可视化数据结构的网址,推荐度从前往后</p>
<ol>
<li><a href="https://visualgo.net/" target="_blank" rel="noopener">visualgo</a></li>
<li><a href="http://sorting.at/" target="_blank" rel="noopener">sorting</a></li>
<li><a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html" target="_blank" rel="noopener">Data Structure Visualizations</a></li>
<li><a href="http://algo-visualizer.jasonpark.me/#path=sorting/insertion/basic" target="_blank" rel="noopener">algo-visualizer</a></li>
</ol>
<p>书籍</p>
<ol>
<li><a href="https://algs4.cs.princeton.edu/home/" target="_blank" rel="noopener">Algorithms, 4th Edition</a><ul>
<li><a href="https://github.com/aistrate/AlgorithmsSedgewick" target="_blank" rel="noopener">algorithmsSedgewick</a></li>
<li><a href="https://introcs.cs.princeton.edu/java/assignments/" target="_blank" rel="noopener">assignment</a></li>
</ul>
</li>
<li><a href="https://www.toptal.com/developers/sorting-algorithms/" target="_blank" rel="noopener">topal</a></li>
</ol>
<h1 id="排序-sort"><a href="#排序-sort" class="headerlink" title="排序 sort"></a>排序 sort</h1><ol>
<li>insert</li>
<li>折半</li>
<li>shell</li>
<li>bubble</li>
<li>quick</li>
<li>select</li>
<li>heap</li>
<li>merge</li>
<li>基数</li>
</ol>
<h2 id="Insertion-Sort"><a href="#Insertion-Sort" class="headerlink" title="Insertion Sort"></a>Insertion Sort</h2><h3 id="ALGORITHM"><a href="#ALGORITHM" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>:n<span class="number">-1</span>,</span><br><span class="line">    <span class="keyword">for</span> (j = i; <span class="number">1</span> &lt;= j <span class="keyword">and</span> a[j<span class="number">-1</span>] &gt; a[j]; j--)</span><br><span class="line">        swap a[j<span class="number">-1</span>, j]</span><br><span class="line">    → invariant: a[<span class="number">1.</span>.i] is sorted</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong>注解:</strong> 默认数组a下标就是1开始. k从i开始,例如一开始就是从第2个元素起步a[2]和第一个元素a[1]比较, 一趟比较完后k随着i++进行下一趟比较, i是用来确定一趟的最后一个元素位置. k&gt;1是说最后比较只会是a[1] a[2] 不会a[0] a[1]因为不存在a[0], 下标从1开始, 最后一趟是从a[n-1] a[n]开始比较.</p>
<p>注意这个不需要一个数组 用来特别往后移动.</p>
<blockquote>
<p>外层循环记录着每趟起始和终止位置,代表趟数;内层是比较方式. 要根据可视化的过程来决定外层怎么写. 比如select的 是小的放最前还是大的放最外层不一样.</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">插入排序 </span></span><br><span class="line"><span class="comment">基本思想：将元素逐个添加到已经排好序的数组中去。 </span></span><br><span class="line"><span class="comment">平均时间复杂度O(n^2) </span></span><br><span class="line"><span class="comment">最好时间复杂度O(n) </span></span><br><span class="line"><span class="comment">最坏时间复杂度O(n^2) </span></span><br><span class="line"><span class="comment">空间复杂度O(1) </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert_sort</span> <span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++)&#123;<span class="comment">//假设第0个已在正确位置，从第一个开始插入</span></span><br><span class="line">        <span class="comment">//第i趟插入需要在[0，i-1]中从后往前找到i的合适位置</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = i; <span class="number">1</span> &lt;= j &amp;&amp; a[j<span class="number">-1</span>] &gt; a[j]; j--)&#123;</span><br><span class="line">            swap(a[j<span class="number">-1</span>],a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert_sort</span> <span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//要进行n-1趟插入</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; <span class="number">0</span> &lt; j &amp;&amp; a[j<span class="number">-1</span>] &gt; a[j]; j--) &#123;  <span class="comment">// 0&lt;=j 不对哦 j是从1开始</span></span><br><span class="line">            swap(a[j<span class="number">-1</span>], a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert_sort</span> <span class="params">(<span class="keyword">int</span> a[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; <span class="number">1</span> &lt;= j &amp;&amp; a[j<span class="number">-1</span>] &lt; a[j]; j--) &#123;</span><br><span class="line">            swap(a[j<span class="number">-1</span>], a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在内循环中将较大的元素一次性向右移动而不是交换两个元素，这样访问数组的次数将减半 。其代码如下：</span></span><br><span class="line">真的么?</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> size = data.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = data[i];</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>; <span class="comment">//要插入的位置</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (temp &lt; data[j<span class="number">-1</span>]) &#123;</span><br><span class="line">                data[j] = data[j<span class="number">-1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                index = j;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        data[index] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION"><a href="#DISCUSSION" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>尽管存在最坏情况(worst-case)是O(n2), 也就是逆序(reversed)的情况下, insertion sort 在data几乎有序(这个叫adaptive)和问题size很小(这个叫low overhead 低开销)的情况下还是一个很好的选择.</p>
<p>还有他是<strong>stable</strong>的, insertion sort is often used as the <strong>recursive base case</strong> (when the problem size is <strong>small</strong>) for higher overhead 分治divide-and-conquer sorting algorithms, such as merge sort or quick sort.</p>
<h3 id="PROPERTIES"><a href="#PROPERTIES" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Stable</li>
<li>O(1) extra space</li>
<li>O(n2) comparisons and swaps</li>
<li>Adaptive: O(n) time when nearly sorted</li>
<li>Very low overhead</li>
</ul>
<h2 id="二分"><a href="#二分" class="headerlink" title="二分"></a>二分</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">将直接插入排序中寻找a[i]插入位置的方法改为二分查找，然后再一次性向右移动元素。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> num = binaryFind(a, a[i], <span class="number">0</span>, i<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">int</span> temp = a[i];</span><br><span class="line">        <span class="comment">//num后的元素向后移动</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; num &lt; j; j--) &#123;</span><br><span class="line">           a[j] = a[j<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        a[num] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//找出元素应在数组中插入的位置</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">binaryFind</span><span class="params">(<span class="keyword">int</span>[] data, <span class="keyword">int</span> temp, <span class="keyword">int</span> down, <span class="keyword">int</span> up)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(up&lt;down || up&gt;data.length || down&lt;<span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">"下标错误"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(temp &lt; data[down]) <span class="keyword">return</span> down;</span><br><span class="line">    <span class="keyword">if</span>(temp &gt; data[up]) <span class="keyword">return</span> up+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = (up-down)/<span class="number">2</span> + down;</span><br><span class="line">    <span class="keyword">if</span>(temp == data[mid]) &#123;</span><br><span class="line">        <span class="keyword">return</span> mid + <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(temp &lt; data[mid]) &#123;</span><br><span class="line">        up = mid<span class="number">-1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(temp &gt; data[mid]) &#123;</span><br><span class="line">        down = mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> binaryFind(data,temp, down, up);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Shell-Sort"><a href="#Shell-Sort" class="headerlink" title="Shell Sort"></a>Shell Sort</h2><h3 id="ALGORITHM-1"><a href="#ALGORITHM-1" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> h &lt; n, h = <span class="number">3</span>*h + <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> h &gt; <span class="number">0</span>,</span><br><span class="line">    h = h / <span class="number">3</span></span><br><span class="line">    <span class="keyword">for</span> k = <span class="number">1</span>:h, insertion sort a[k:h:n]</span><br><span class="line">    → invariant: each h-sub-<span class="built_in">array</span> is sorted</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong>注解:</strong> 首先按n大小计算递增序列,这里是按1 4 13 40 来, 然后从最大的h开始. 注意有一步<code>h = h / 3</code> 这就是比n小的最大的h, 因为前一个while跳出就是h&gt;n的情况,还得返回去. 然后a[1,4] a[2, 5] 这样按insertion sort比较 a[k:h:n]  是从k到n以k为间隔</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">5、希尔排序 </span></span><br><span class="line"><span class="comment">基本思想：将无序数组分成若干个子序列，子序列不是逐段分割的，而是相隔特定增量。对各个子序列进行插入排序。 </span></span><br><span class="line"><span class="comment">然后再选择一个更小的增量，再将数组分割成多个子序列进行排序。最后选择增量为1，即使用直接插入排序，使最终数组成为有序数组。 </span></span><br><span class="line"><span class="comment">平均时间复杂度O(n^1.3) </span></span><br><span class="line"><span class="comment">最好时间复杂度O(n) </span></span><br><span class="line"><span class="comment">最坏时间复杂度O(n^2) </span></span><br><span class="line"><span class="comment">空间复杂度O(1) </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shell_sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> gap;</span><br><span class="line">    <span class="keyword">for</span>( gap = n/<span class="number">2</span>; gap &gt; <span class="number">0</span>; gap /= <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = gap; i &lt; n; i ++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; a[j] &lt; a[j + gap]; j-=gap)&#123;<span class="comment">//每个元素与自己组内的元素进行插入排序</span></span><br><span class="line">                swap(a[j], a[j + gap]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shell_sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (h &lt; n) &#123;</span><br><span class="line">        h = <span class="number">3</span>*h +<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (h&gt;<span class="number">0</span>) &#123;</span><br><span class="line">        h = h/<span class="number">3</span>;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= h<span class="number">-1</span>; k++) &#123; <span class="comment">//根据增量分成若干组  每个h对应趟数</span></span><br><span class="line">            <span class="comment">// insert_sort的理解</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = k+h; i &lt;= n<span class="number">-1</span>; i=i+h)&#123;<span class="comment">//假设第0个已在正确位置，从第一个开始插入  </span></span><br><span class="line">                <span class="keyword">for</span> ( <span class="keyword">int</span> j = i; k+h &lt;= j &amp;&amp; a[j-h] &gt; a[j]; j=j-h)&#123;  <span class="comment">//不能加 k&lt;= j 用k+h &lt;= j也对</span></span><br><span class="line">                    swap(a[j-h],a[j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//for ( int k = 0; k &lt;= h-1; k++) &#123; //根据增量分成若干组  </span></span><br><span class="line">            <span class="comment">// insert_sort()</span></span><br><span class="line">            <span class="comment">// for(int i = k+h; i &lt;= n-1; i=i+h)&#123;//假设第0个已在正确位置，从第一个开始插入  </span></span><br><span class="line">            <span class="comment">//     for ( int j = i; k &lt;= j &amp;&amp; a[j-h] &gt; a[j]; j=j-h)&#123;</span></span><br><span class="line">            <span class="comment">//         swap(a[j-h],a[j]);</span></span><br><span class="line">            <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//核心算法，增量序列 1 4 13 ....（3*h+1）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length;</span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(h &lt; n/<span class="number">3</span>) <span class="comment">// 注意这里变了 </span></span><br><span class="line">        h = <span class="number">3</span>*h + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(h &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = h; i &lt;= n<span class="number">-1</span>; i++) &#123; <span class="comment">//这种事按4的比完,再按5比完.而不是048这样. 8的这种后面会比到的</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; h &lt;= j &amp;&amp; a[j-h] &gt; a[j]; j = j-h) &#123;</span><br><span class="line">                swap(a[j-h], a[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        h = h/<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-1"><a href="#DISCUSSION-1" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>shell sort最坏情况时间复杂度(The worse-case time complexity)依赖于递增序列(the increment sequence). 这里所使用的the increments 1 4 13 40 121…, 时间复杂度是 O(n3/2). For other increments, time complexity is known to be O(n4/3) and even O(n·lg2(n)). 既不存在时间复杂度的紧上界，也不知道最佳增量序列。</p>
<p>Because shell sort is based on insertion sort, shell sort inherits insertion sort’s <strong>adaptive properties</strong>. The adapation is not as dramatic because shell sort requires one pass through the data for each increment, but it is significant. For the increment sequence shown above, there are log3(n) increments, so the time complexity for nearly sorted data is O(n·log3(n)).</p>
<p>Because of its <strong>low overhead, relatively simple implementation, adaptive properties, and sub-quadratic time complexity</strong>, shell sort may be a viable alternative to the O(n·lg(n)) sorting algorithms for some applications when the data to be sorted is not very large.</p>
<h3 id="PROPERTIES-1"><a href="#PROPERTIES-1" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Not stable</li>
<li>O(1) extra space</li>
<li>O(n3/2) time as shown (see below)</li>
<li>Adaptive: O(n·lg(n)) time when nearly sorted</li>
</ul>
<h2 id="Bubble-Sort"><a href="#Bubble-Sort" class="headerlink" title="Bubble Sort"></a>Bubble Sort</h2><h3 id="ALGORITHM-2"><a href="#ALGORITHM-2" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i = n<span class="number">-1</span>:<span class="number">0</span>,</span><br><span class="line">    swapped = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> j = <span class="number">1</span>:i; n--</span><br><span class="line">        <span class="keyword">if</span> a[j<span class="number">-1</span>] &gt; a[j],</span><br><span class="line">            swap a[j<span class="number">-1</span>,j]</span><br><span class="line">            swapped = <span class="literal">true</span></span><br><span class="line">    → invariant: a[i..n<span class="number">-1</span>] in final position</span><br><span class="line">    <span class="keyword">break</span> <span class="keyword">if</span> <span class="keyword">not</span> swapped</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong> Bubble sort每趟排序完后最后一个元素到位</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">冒泡排序 </span></span><br><span class="line"><span class="comment">基本思想： 不断比较相邻的两个数，让较大的数不断地往后移。经过一番比较，就选出了最大的数。经过第二轮比较，就选出了次大的数。以此类推。 </span></span><br><span class="line"><span class="comment">那么对于大小为N的数组，需要N-1轮比较。 </span></span><br><span class="line"><span class="comment">平均时间复杂度O（N^2） </span></span><br><span class="line"><span class="comment">最好情况O（N） </span></span><br><span class="line"><span class="comment">最坏情况O（N^2） </span></span><br><span class="line"><span class="comment">空间复杂度O（1） </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//要进行N-1轮比较, 这里记录趟数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n<span class="number">-2</span>; i++ )<span class="comment">//[0,n-2]恰好n-1轮比较</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> is_sorted = <span class="literal">true</span>;  <span class="comment">// 是否交换的</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n<span class="number">-1</span>-i; j++)<span class="comment">//已经排好序的最后i个不用比较，要比较的数的个数为n-i个，那么需要比较的次数为n-i-1</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j<span class="number">-1</span>] &gt; a[j])&#123;</span><br><span class="line">                is_sorted = <span class="literal">false</span>;</span><br><span class="line">                swap(a[j<span class="number">-1</span>],a[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(is_sorted)<span class="comment">//如果没有发生交换，说明已经排好序了，提前退出循环,所以最好情况下时间复杂度为O（N）</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n<span class="number">-1</span>; <span class="number">1</span> &lt;= i; i-- ) <span class="comment">// 这个好理解</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> is_sorted = <span class="literal">true</span>;  <span class="comment">// 是否交换的标志</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j<span class="number">-1</span>] &gt; a[j])&#123;</span><br><span class="line">                is_sorted = <span class="literal">false</span>;</span><br><span class="line">                swap(a[j<span class="number">-1</span>],a[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(is_sorted) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-2"><a href="#DISCUSSION-2" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>Bubble sort has many of the same properties as insertion sort, but has <strong>slightly higher overhead</strong>. In the case of nearly sorted data, bubble sort takes O(n) time, but requires at least 2 passes through the data (whereas insertion sort requires something more like 1 pass).</p>
<h3 id="PROPERTIES-2"><a href="#PROPERTIES-2" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Stable</li>
<li>O(1) extra space</li>
<li>O(n2) comparisons and swaps</li>
<li>Adaptive: O(n) when nearly sorted</li>
</ul>
<h2 id="Quick-Sort"><a href="#Quick-Sort" class="headerlink" title="Quick Sort"></a>Quick Sort</h2><h3 id="ALGORITHM-3"><a href="#ALGORITHM-3" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">_<span class="meta"># choose pivot_</span></span><br><span class="line">swap a[<span class="number">1</span>,rand(<span class="number">1</span>,n)]</span><br><span class="line"></span><br><span class="line">_# <span class="number">2</span>-way partition_</span><br><span class="line">k = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">2</span>:n, <span class="keyword">if</span> a[i] &lt; a[<span class="number">1</span>], swap a[++k,i]</span><br><span class="line">swap a[<span class="number">1</span>,k]</span><br><span class="line">_→ invariant: a[<span class="number">1.</span>.k<span class="number">-1</span>] &lt; a[k] &lt;= a[k+<span class="number">1.</span>.n]_</span><br><span class="line"></span><br><span class="line">_# recursive sorts_</span><br><span class="line">sort a[<span class="number">1.</span>.k<span class="number">-1</span>]</span><br><span class="line">sort a[k+<span class="number">1</span>,n]</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong> Quick sort有好几种</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">3、快速排序 </span></span><br><span class="line"><span class="comment">基本思想：采用分而治之的思想，将要排序的数分成左右两部分，其中一部分的数据比key小，另一部分数据比key大。然后将所分得的两部分数据进行同样的划分。重复执行以上的划分操作。</span></span><br><span class="line"><span class="comment">平均时间复杂度O（Nlog2(N)）</span></span><br><span class="line"><span class="comment">最好情况O（Nlog2(N)）</span></span><br><span class="line"><span class="comment">最坏情况O（N^2）</span></span><br><span class="line"><span class="comment">空间复杂度O（Nlog2(N)）</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span><span class="comment">//返回划分的中间值</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    key = arr[low];<span class="comment">//相当于在索引low处挖坑，下一个就要找合适的据来填坑</span></span><br><span class="line">    <span class="keyword">if</span> (low &gt; high) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(low &lt; high)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(low &lt; high &amp;&amp; key &lt;= arr[high])&#123;</span><br><span class="line">            high --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(low &lt; high)</span><br><span class="line">            arr[low ++] = arr[high];<span class="comment">//找到合适的数据填到了lo坑，但是形成了high坑，继续找合适的数据</span></span><br><span class="line">        <span class="keyword">while</span>( low &lt; high &amp;&amp; arr[low] &lt;= key)</span><br><span class="line">            low ++;</span><br><span class="line">        <span class="keyword">if</span>( low &lt; high)</span><br><span class="line">            arr[high --] =  arr[low];<span class="comment">//low又成了坑</span></span><br><span class="line"></span><br><span class="line">    arr[low] = key;<span class="comment">//将key填到这个坑</span></span><br><span class="line">    <span class="keyword">return</span> low;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> num[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pos;</span><br><span class="line">    <span class="keyword">if</span>(low &lt; high)&#123;</span><br><span class="line">        pos = partition(num, low, high);</span><br><span class="line">        quick_sort(num, low, pos<span class="number">-1</span>);</span><br><span class="line">        quick_sort(num, pos+<span class="number">1</span>, high);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*快速排序非递归版*/</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quicksort2</span><span class="params">(<span class="keyword">int</span> num[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key = num[low];</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">    <span class="keyword">if</span>(low &lt; high)&#123;</span><br><span class="line">        <span class="keyword">int</span> pos = partition(num, low, high);</span><br><span class="line">        <span class="keyword">if</span>(pos<span class="number">-1</span> &gt; low)&#123;</span><br><span class="line">            s.push(pos - <span class="number">1</span>);</span><br><span class="line">            s.push(low);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pos+<span class="number">1</span> &lt; high)&#123;</span><br><span class="line">            s.push(high);</span><br><span class="line">            s.push(pos + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!s.empty())&#123;</span><br><span class="line">            <span class="keyword">int</span> l = s.top();</span><br><span class="line">            s.pop();</span><br><span class="line">            <span class="keyword">int</span> r = s.top();</span><br><span class="line">            s.pop();</span><br><span class="line">            pos = partition(num, l, r);</span><br><span class="line">            <span class="keyword">if</span>(pos - <span class="number">1</span> &gt; l)&#123;</span><br><span class="line">                s.push(pos - <span class="number">1</span>);</span><br><span class="line">                s.push(l);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(pos + <span class="number">1</span> &lt; r)&#123;</span><br><span class="line">                s.push(r);</span><br><span class="line">                s.push(pos + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i=low,j=high,key=arr[low];<span class="comment">//i j 是需要的 low high用来递归 不能动</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(i &gt; j)</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; key &lt;= arr[j])&#123;</span><br><span class="line">            j --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i &lt; j)</span><br><span class="line">            arr[i ++] = arr[j];<span class="comment">//找到合适的数据填到了low坑，但是形成了high坑，继续找合适的数据</span></span><br><span class="line">        <span class="keyword">while</span>( i &lt; j &amp;&amp; arr[i] &lt;= key)</span><br><span class="line">            i ++;</span><br><span class="line">        <span class="keyword">if</span>( i &lt; j)</span><br><span class="line">            arr[j --] =  arr[i];<span class="comment">//low又成了坑</span></span><br><span class="line">    &#125;</span><br><span class="line">	arr[i] = key;<span class="comment">//将key填到这个坑 一趟后</span></span><br><span class="line"></span><br><span class="line">    quick_sort(arr,low,i<span class="number">-1</span>);</span><br><span class="line">    quick_sort(arr,i+<span class="number">1</span>,high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-3"><a href="#DISCUSSION-3" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>When carefully implemented, quick sort is <strong>robust and has low overhead</strong>. When a stable sort is not needed, quick sort is an excellent general-purpose sort – although the <strong>3-way</strong> partitioning version should always be used instead.</p>
<p>The 2-way partitioning code shown above is written for clarity rather than optimal performance; it exhibits poor locality, and, critically, exhibits O(n2) time when there are few unique keys. A more efficient and robust 2-way partitioning method is given in Quicksort is Optimal by Robert Sedgewick and Jon Bentley. The robust partitioning produces balanced recursion when there are many values equal to the pivot, yielding probabilistic guarantees of O(n·lg(n)) time and O(lg(n)) space for all inputs.</p>
<p>With both sub-sorts performed recursively, quick sort requires O(n) extra space for the recursion stack in the worst case when recursion is not balanced. This is exceedingly unlikely to occur, but it can be avoided by sorting the smaller sub-array recursively first; the second sub-array sort is a tail recursive call, which may be done with iteration instead. With this optimization, the algorithm uses O(lg(n)) extra space in the worst case.</p>
<h3 id="PROPERTIES-3"><a href="#PROPERTIES-3" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Not stable</li>
<li>O(lg(n)) extra space (see discussion)</li>
<li>O(n2) time, but typically O(n·lg(n)) time</li>
<li>Not adaptive</li>
</ul>
<h2 id="Quick-Sort-3-Way"><a href="#Quick-Sort-3-Way" class="headerlink" title="Quick Sort 3 Way"></a>Quick Sort 3 Way</h2><h3 id="ALGORITHM-4"><a href="#ALGORITHM-4" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">_<span class="meta"># choose pivot_</span></span><br><span class="line">swap a[n,rand(<span class="number">1</span>,n)]</span><br><span class="line"></span><br><span class="line">_# <span class="number">3</span>-way partition_</span><br><span class="line">i = <span class="number">1</span>, k = <span class="number">1</span>, p = n</span><br><span class="line"><span class="keyword">while</span> i &lt; p,</span><br><span class="line">  <span class="keyword">if</span> a[i] &lt; a[n], swap a[i++,k++]</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> a[i] == a[n], swap a[i,--p]</span><br><span class="line">  <span class="keyword">else</span> i++</span><br><span class="line">end</span><br><span class="line">_→ invariant: a[p..n] all equal_</span><br><span class="line">_→ invariant: a[<span class="number">1.</span>.k<span class="number">-1</span>] &lt; a[p..n] &lt; a[k..p<span class="number">-1</span>]_</span><br><span class="line"></span><br><span class="line">_# move pivots to center_</span><br><span class="line">m = min(p-k,n-p+<span class="number">1</span>)</span><br><span class="line">swap a[k..k+m<span class="number">-1</span>,n-m+<span class="number">1.</span>.n]</span><br><span class="line"></span><br><span class="line">_# recursive sorts_</span><br><span class="line">sort a[<span class="number">1.</span>.k<span class="number">-1</span>]</span><br><span class="line">sort a[n-p+k+<span class="number">1</span>,n]</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-4"><a href="#DISCUSSION-4" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>The 3-way partition variation of quick sort has slightly higher overhead compared to the standard 2-way partition version. Both have the same best, typical, and worst case time bounds, but this version is highly adaptive in the very common case of sorting with few unique keys.</p>
<p>The 3-way partitioning code shown above is written for clarity rather than optimal performance; it exhibits poor locality, and performs more swaps than necessary. A more efficient but more elaborate 3-way partitioning method is given in Quicksort is Optimal by Robert Sedgewick and Jon Bentley.</p>
<p>When stability is not required, quick sort is the general purpose sorting algorithm of choice. Recently, a novel dual-pivot variant of 3-way partitioning has been discovered that beats the single-pivot 3-way partitioning method both in theory and in practice.</p>
<h3 id="PROPERTIES-4"><a href="#PROPERTIES-4" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Not stable</li>
<li>O(lg(n)) extra space</li>
<li>O(n2) time, but typically O(n·lg(n)) time</li>
<li>Adaptive: O(n) time when O(1) unique keys</li>
</ul>
<h2 id="Selection-Sort"><a href="#Selection-Sort" class="headerlink" title="Selection Sort"></a>Selection Sort</h2><h3 id="ALGORITHM-5"><a href="#ALGORITHM-5" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">0</span>:n<span class="number">-1</span>,</span><br><span class="line">    min = i</span><br><span class="line">    <span class="keyword">for</span> j = i+<span class="number">1</span>:n<span class="number">-1</span>, </span><br><span class="line">        <span class="keyword">if</span> a[min] &gt; a[j], min = j</span><br><span class="line">    → invariant: a[min] smallest of a[i..n<span class="number">-1</span>]</span><br><span class="line">    swap a[i,min]</span><br><span class="line">    → invariant: a[<span class="number">0.</span>.i] in final position</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong> 每一趟可以选择最小的放到最前面,也可以选最大的放最后面. k使用存放临时极小值(极大值). 最后一趟比完才最后确定.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">选择排序 </span></span><br><span class="line"><span class="comment">基本思想：首先，选出最小的数放在第一位，然后选择第二小的数，放在第二位；以此类推，直到所有的数从小到大排列. </span></span><br><span class="line"><span class="comment">那么，对于大小为N的数组需要N-1轮选择过程。第i轮选取第i小的数，请将其放在第i个位置上。</span></span><br><span class="line"><span class="comment">不稳定 </span></span><br><span class="line"><span class="comment">平均时间复杂度O（N^2）</span></span><br><span class="line"><span class="comment">最好情况O（N^2）</span></span><br><span class="line"><span class="comment">最坏情况O（N^2）</span></span><br><span class="line"><span class="comment">空间复杂度O（1）</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">select_sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n<span class="number">-1</span><span class="number">-1</span>; i++)&#123;<span class="comment">//进行n-1轮选择,也就是i的取值为[0，n-2] </span></span><br><span class="line">        <span class="keyword">int</span> min_index = i;</span><br><span class="line">        <span class="comment">//记录第i小的数所在的索引</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n<span class="number">-1</span>; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[min_index] &gt; a[j]) <span class="comment">//有点谐</span></span><br><span class="line">                min_index = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i != min_index)&#123;<span class="comment">//根据记录的第i小的数的索引，找到了第i小的数。然后将该数放到其正确位置。也就是第i个位置。</span></span><br><span class="line">            swap(a[i] , a[min_index]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">select_sort</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt;= n<span class="number">-1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j] &lt; a[min])</span><br><span class="line">                min=j;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a[i], a[min]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-5"><a href="#DISCUSSION-5" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>从比较结果来看, 最好不要用selection sort <strong>should never be used</strong>. It does not adapt to the data in any way (notice that the four animations above run in lock step), 运行时间一直是平方项(quadratic).</p>
<p>但是有一个优点 selection sort 可以减少交换项数目. 可以应用于交换项cost很大的的情况.</p>
<h3 id="PROPERTIES-5"><a href="#PROPERTIES-5" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Not stable</li>
<li>O(1) extra space</li>
<li>Θ(n2) comparisons</li>
<li>Θ(n) swaps</li>
<li>Not adaptive</li>
</ul>
<h2 id="Heap-Sort"><a href="#Heap-Sort" class="headerlink" title="Heap Sort"></a>Heap Sort</h2><h3 id="ALGORITHM-6"><a href="#ALGORITHM-6" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># heapify</span></span><br><span class="line"><span class="keyword">for</span> i = n/<span class="number">2</span>:<span class="number">1</span>, sink(a,i,n)</span><br><span class="line">→ invariant: a[<span class="number">1</span>,n] in heap order</span><br><span class="line"></span><br><span class="line"># sortdown</span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>:n,</span><br><span class="line">    swap a[<span class="number">1</span>,n-i+<span class="number">1</span>]</span><br><span class="line">    sink(a,<span class="number">1</span>,n-i)</span><br><span class="line">    → invariant: a[n-i+<span class="number">1</span>,n] in final position</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"># sink from i in a[<span class="number">1.</span>.n]</span><br><span class="line">function sink(a,i,n):</span><br><span class="line">    # &#123;lc,rc,mc&#125; = &#123;left,right,max&#125; child index</span><br><span class="line">    lc = <span class="number">2</span>*i</span><br><span class="line">    <span class="keyword">if</span> lc &gt; n, <span class="keyword">return</span> # no children</span><br><span class="line">    rc = lc + <span class="number">1</span></span><br><span class="line">    mc = (rc &gt; n) ? lc : (a[lc] &gt; a[rc]) ? lc : rc</span><br><span class="line">    <span class="keyword">if</span> a[i] &gt;= a[mc], <span class="keyword">return</span> # heap ordered</span><br><span class="line">    swap a[i,mc]</span><br><span class="line">    sink(a,mc,n)</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>完全二叉, 用的是数组,首先是建堆,然后再排序.<br>建堆(heapify)中确定大顶堆还是小顶堆. 从最后一个非叶子节点(n/2)开始比较,往上比较.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//堆排序:树形选择排序，将带排序记录看成完整的二叉树，第一步：建立初堆，第二步：调整堆</span></span><br><span class="line"><span class="comment">//第二步：调整堆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapAdjust</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> s,<span class="keyword">int</span> n)</span>  <span class="comment">//但习惯上用大顶堆</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//调整为小根堆，从小到大</span></span><br><span class="line">    <span class="keyword">int</span> rc=a[s];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>*s;j&lt;=n;j*=<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j&lt;n &amp;&amp; a[j]&gt;a[j+<span class="number">1</span>])<span class="comment">//判断左右子数大小,找小的</span></span><br><span class="line">            j++;</span><br><span class="line">        <span class="keyword">if</span>(rc&lt;=a[j])</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        a[s]=a[j]; <span class="comment">//小的放上去</span></span><br><span class="line">        s=j;</span><br><span class="line">    &#125;</span><br><span class="line">    a[s]=rc;    <span class="comment">//大的放下来</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第一步：建初堆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreatHeap</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//小根堆,从最后一个非叶子节点开始,根是1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n/<span class="number">2</span>;i&gt;<span class="number">0</span>;i--)</span><br><span class="line">        HeapAdjust(a,i,n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//整合</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CreatHeap(a,n);<span class="comment">//第一步，建立初堆</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x=a[<span class="number">1</span>];<span class="comment">//堆顶与最后一个元素互换</span></span><br><span class="line">        a[<span class="number">1</span>]=a[i];</span><br><span class="line">        a[i]=x;</span><br><span class="line">        HeapAdjust(a,<span class="number">1</span>,i<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">int</span> *a=<span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;n;j++)<span class="comment">//注意：这里是从1开始的</span></span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[j];</span><br><span class="line">    HeapSort(a,n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;a[i];</span><br><span class="line">    <span class="keyword">delete</span> []a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//　　创建大堆顶，i为当节点，n为堆的大小</span></span><br><span class="line"><span class="comment">//    从第一个非叶子结点i从下至上，从右至左调整结构</span></span><br><span class="line"><span class="comment">//    从两个儿子节点中选出较大的来与父亲节点进行比较</span></span><br><span class="line"><span class="comment">//    如果儿子节点比父亲节点大，则进行交换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreatHeap</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> i, <span class="keyword">int</span>  n)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    注意数组是从0开始计数，所以左节点为2*i+1，右节点为2*i+2</span></span><br><span class="line">    <span class="comment">// 这里改了吧 应该从1开始好</span></span><br><span class="line">    <span class="keyword">for</span> (; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> left = i * <span class="number">2</span> + <span class="number">1</span>;    <span class="comment">//左子树节点</span></span><br><span class="line">        <span class="keyword">int</span> right = i * <span class="number">2</span> + <span class="number">2</span>;    <span class="comment">//右子树节点</span></span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//选出左右子节点中最大的</span></span><br><span class="line">        <span class="keyword">if</span> (right &lt; n) &#123;</span><br><span class="line">            a[left] &gt; a[right] ? j= left : j = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            j = left;</span><br><span class="line">        <span class="comment">//交换子节点与父节点</span></span><br><span class="line">        <span class="keyword">if</span> (a[j] &gt; a[i]) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = a[i];</span><br><span class="line">            a[i] = a[j];</span><br><span class="line">            a[j] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    进行堆排序，依次选出最大值放到最后面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(<span class="keyword">int</span> a[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length<span class="number">-1</span>;</span><br><span class="line">    <span class="comment">//初始化构造堆</span></span><br><span class="line">    CreatHeap(a, n/<span class="number">2</span><span class="number">-1</span>, n);</span><br><span class="line">　　<span class="comment">//交换第一个元素和最后一个元素后，堆的大小减1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = n<span class="number">-1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//最后一个元素和第一个元素进行交换</span></span><br><span class="line">        <span class="keyword">int</span> tmp = a[<span class="number">0</span>];</span><br><span class="line">        a[<span class="number">0</span>] = a[j];</span><br><span class="line">        a[j] = tmp;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i = j / <span class="number">2</span> - <span class="number">1</span>;  <span class="comment">//有必要-1么</span></span><br><span class="line">        CreatHeap(a, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[] = &#123; <span class="number">10</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">14</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="keyword">sizeof</span>(a) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">    HeapSort(a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"排序好的数组为："</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l &lt; n; l++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[l]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapAdjust</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> s,<span class="keyword">int</span> n)</span>  <span class="comment">//但习惯上用大顶堆</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//调整为大根堆，</span></span><br><span class="line">    <span class="keyword">int</span> rc = a[s];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>*s; j &lt;= n; j*=<span class="number">2</span>) <span class="comment">// 有左子树,</span></span><br><span class="line">    &#123;</span><br><span class="line">		<span class="keyword">if</span> (j+<span class="number">1</span> &lt;= n ) &#123;	<span class="comment">//如果右子树存在</span></span><br><span class="line">			<span class="keyword">if</span>(a[j] &lt; a[j+<span class="number">1</span>])<span class="comment">//判断左右子数大小</span></span><br><span class="line">				j++;			</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(rc &gt;= a[j]) &#123;  <span class="comment">//根和左子树比</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;    </span><br><span class="line">        a[s] = a[j]; <span class="comment">//大的放上去</span></span><br><span class="line">        s = j;		<span class="comment">// 继续往大的子树的子树找,保证当前堆是大顶堆</span></span><br><span class="line">    &#125;</span><br><span class="line">    a[s] = rc;    <span class="comment">//小的放下来</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第一步：建初堆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreatHeap</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//小根堆,从最后一个非叶子节点开始,根是1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n/<span class="number">2</span>; i &gt; <span class="number">0</span>; i--)</span><br><span class="line">        HeapAdjust(a,i,n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//整合</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CreatHeap(a,n);<span class="comment">//第一步，建立初堆</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n<span class="number">-1</span> ; i &gt;= <span class="number">2</span>; i--)  <span class="comment">//这里从n-1到2就可以了</span></span><br><span class="line">    &#123;</span><br><span class="line">		swap(a[<span class="number">1</span>], a[i]);</span><br><span class="line">        HeapAdjust(a,<span class="number">1</span>,i<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-6"><a href="#DISCUSSION-6" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>Heap sort is simple to implement, performs an O(n·lg(n)) in-place sort, but is not stable.</p>
<p>The first loop, the Θ(n) “heapify” phase, puts the array into heap order. The second loop, the O(n·lg(n)) “sortdown” phase, repeatedly extracts the maximum and restores heap order.</p>
<p>The sink function is written recursively for clarity. Thus, as shown, the code requires Θ(lg(n)) space for the recursive call stack. However, the tail recursion in sink() is easily converted to iteration, which yields the O(1) space bound.</p>
<p>Both phases are slightly adaptive, though not in any particularly useful manner. In the nearly sorted case, the heapify phase destroys the original order. In the reversed case, the heapify phase is as fast as possible since the array starts in heap order, but then the sortdown phase is typical. In the few unique keys case, there is some speedup but not as much as in shell sort or 3-way quicksort.</p>
<h3 id="PROPERTIES-6"><a href="#PROPERTIES-6" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Not stable</li>
<li>O(1) extra space (see discussion)</li>
<li>O(n·lg(n)) time</li>
<li>Not really adaptive</li>
</ul>
<h2 id="Merge-Sort"><a href="#Merge-Sort" class="headerlink" title="Merge Sort"></a>Merge Sort</h2><h3 id="ALGORITHM-7"><a href="#ALGORITHM-7" class="headerlink" title="ALGORITHM"></a>ALGORITHM</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># split in half</span></span><br><span class="line">m = n / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"># recursive sorts</span><br><span class="line">sort a[<span class="number">1.</span>.m]</span><br><span class="line">sort a[m+<span class="number">1.</span>.n]</span><br><span class="line"></span><br><span class="line"># merge sorted sub-arrays <span class="keyword">using</span> temp <span class="built_in">array</span></span><br><span class="line">b = copy of a[<span class="number">1.</span>.m]</span><br><span class="line">i = <span class="number">1</span>, j = m+<span class="number">1</span>, k = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &lt;= m <span class="keyword">and</span> j &lt;= n,</span><br><span class="line">    a[k++] = (a[j] &lt; b[i]) ? a[j++] : b[i++]</span><br><span class="line">    → invariant: a[<span class="number">1.</span>.k] in final position</span><br><span class="line"><span class="keyword">while</span> i &lt;= m,</span><br><span class="line">    a[k++] = b[i++]</span><br><span class="line">    → invariant: a[<span class="number">1.</span>.k] in final position</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">6、归并排序： </span></span><br><span class="line"><span class="comment">基本思想：将待排序序列【0，n-1】看成是n个长度为1的有序序列，将相邻的有序表成对归并，得到n/2个长度为2的有序表。再次归并，得到n/4个长度为4的有序表。 </span></span><br><span class="line"><span class="comment">依次类推，最后得到长度为n的1个有序表。 </span></span><br><span class="line"><span class="comment">所以归并排序其实要做两件事： </span></span><br><span class="line"><span class="comment">1、先递归的分解数列， </span></span><br><span class="line"><span class="comment">2、再合并数列就完成了归并排序。 </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">先来考虑如何合并？ </span></span><br><span class="line"><span class="comment">每次合并过程中都要对两个有序的序列段进行合并，然后排序 </span></span><br><span class="line"><span class="comment">待合并的两个有序序列段分别为 R[low, mid] 和 R[mid+1, high] </span></span><br><span class="line"><span class="comment">先将它们合并到一个暂存数组R2，合并完再将R2复制回R1中。 </span></span><br><span class="line"><span class="comment">这样一次合并排序就完成了。 </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">最好、最坏和平均时间复杂度都是O(nlogn)， </span></span><br><span class="line"><span class="comment">空间复杂度是O(n) </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> low ,<span class="keyword">int</span> mid, <span class="keyword">int</span> high)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> tmp[];</span><br><span class="line">    <span class="keyword">int</span> i,j,k;  </span><br><span class="line">    i = low;  <span class="comment">//i 和 j是临时会动的 所以新定义一个变量</span></span><br><span class="line">    j = mid + <span class="number">1</span>;</span><br><span class="line">    k = <span class="number">0</span>;<span class="comment">//k是存放临时合并数组的下表</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span>( i &lt;= mid &amp;&amp; j &lt;= high)&#123;</span><br><span class="line">        <span class="keyword">if</span>( a[i] &lt; a[j])  <span class="comment">// 小的元素放tmp</span></span><br><span class="line">            tmp[k++] = a[i++];</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            tmp[k++] = a[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>( i &lt;= mid)</span><br><span class="line">        tmp[k++] = a[i++];</span><br><span class="line">    <span class="keyword">while</span>( j &lt;= high)</span><br><span class="line">        tmp[k++] = a[i++];</span><br><span class="line">    <span class="comment">//最后再复制回a</span></span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; k; i++ )</span><br><span class="line">        a[low+i] = tmp[i];<span class="comment">//!!!!此处a是从low开始，tmp是从0开始。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以上完整程序</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span> <span class="params">(<span class="keyword">int</span> a[])</span> </span>&#123;</span><br><span class="line">    sort (a, <span class="number">0</span>, a.length<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span> <span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left &gt;= right) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">int</span> mid = (left+right) / <span class="number">2</span>;  <span class="comment">// (right - left)/2 + left</span></span><br><span class="line">    sort (a, left, mid);</span><br><span class="line">    sort (a, mid+<span class="number">1</span>, right);</span><br><span class="line">    merge (a, left, mid, right);</span><br><span class="line">    print(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//改进 还有换一种自底向上的</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">归并排序是建立在归并操作上的一种有效的排序算法。该算法是采用分治法的一个非常典型的应用。</span><br><span class="line">首先考虑下如何将<span class="number">2</span>个有序数列合并。这个非常简单，只要从比较<span class="number">2</span>个数列的第一个数，谁小就先取谁，取了后就在对应数列中删除这个数。然后再进行比较，如果有数列为空，那直接将另一个数列的数据依次取出即可。</span><br><span class="line"></span><br><span class="line"><span class="comment">//将有序数组a[]和b[]合并到c[]中</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MemeryArray</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n, <span class="keyword">int</span> b[], <span class="keyword">int</span> m, <span class="keyword">int</span> c[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">int</span> i, j, k;</span><br><span class="line"></span><br><span class="line"> i = j = k = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; m)</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="keyword">if</span> (a[i] &lt; b[j])</span><br><span class="line">         c[k++] = a[i++];</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">         c[k++] = b[j++]; </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span> (i &lt; n)</span><br><span class="line">     c[k++] = a[i++];</span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span> (j &lt; m)</span><br><span class="line">     c[k++] = b[j++];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DISCUSSION-7"><a href="#DISCUSSION-7" class="headerlink" title="DISCUSSION"></a>DISCUSSION</h3><p>Merge sort is very <strong>predictable</strong>. It makes between 0.5lg(n) and lg(n) comparisons per element, and between lg(n) and 1.5lg(n) swaps per element. The minima are achieved for already sorted data; the maxima are achieved, on average, for random data. If using Θ(n) extra space is of no concern, then merge sort is <strong>an excellent choice</strong>: It is simple to implement, and it is the only stable O(n·lg(n)) sorting algorithm. Note that when sorting linked lists, merge sort requires only Θ(lg(n)) extra space (for recursion).</p>
<p>Merge sort is the algorithm of choice for a variety of situations: <strong>when stability is required, when sorting linked lists, and when random access is much more expensive than sequential access</strong> (for example, external sorting on tape).</p>
<p>There do exist linear time in-place merge algorithms for the last step of the algorithm, but they are both expensive and complex. The complexity is justified for applications such as external sorting when Θ(n) extra space is not available.</p>
<h3 id="PROPERTIES-7"><a href="#PROPERTIES-7" class="headerlink" title="PROPERTIES"></a>PROPERTIES</h3><ul>
<li>Stable</li>
<li>Θ(n) extra space for arrays (as shown)</li>
<li>Θ(lg(n)) extra space for linked lists</li>
<li>Θ(n·lg(n)) time</li>
<li>Not adaptive</li>
<li>Does not require random access to data</li>
</ul>
<hr>
<h2 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h2><h1 id="树中"><a href="#树中" class="headerlink" title="树中"></a>树中</h1><h2 id="堆说过了"><a href="#堆说过了" class="headerlink" title="堆说过了"></a>堆说过了</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/17/HaiKu-OS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/17/HaiKu-OS/" itemprop="url">HaiKu_OS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-17T23:17:00+08:00">2018-03-17</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/多媒体/" itemprop="url" rel="index"><span itemprop="name">多媒体</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/JSON-Web-Token实现URL认证访问/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/JSON-Web-Token实现URL认证访问/" itemprop="url">JSON_Web_Token实现URL认证访问</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T21:49:42+08:00">2018-03-07</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/newbie项目/" itemprop="url" rel="index"><span itemprop="name">newbie项目</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JSON-Web-Token实现URL认证访问"><a href="#JSON-Web-Token实现URL认证访问" class="headerlink" title="JSON_Web_Token实现URL认证访问"></a>JSON_Web_Token实现URL认证访问</h1>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/koa的一些middleware/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/koa的一些middleware/" itemprop="url">koa的一些middleware</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T19:36:14+08:00">2018-03-07</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/newbie项目/" itemprop="url" rel="index"><span itemprop="name">newbie项目</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="koa的一些常用的middleware"><a href="#koa的一些常用的middleware" class="headerlink" title="koa的一些常用的middleware"></a>koa的一些常用的middleware</h1><p><a href="https://github.com/koajs/koa/wiki" target="_blank" rel="noopener">直接去github中的koa的wiki中搜</a></p>
<h2 id="Frameworks"><a href="#Frameworks" class="headerlink" title="Frameworks"></a>Frameworks</h2><p>Frameworks, boilerplates and other starter kits using Koa.</p>
<h2 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a>Middleware</h2><p>Known middleware for Koa, you may want to search npm with “koa” to find more.</p>
<h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><h2 id="Body-Parsing"><a href="#Body-Parsing" class="headerlink" title="Body Parsing"></a>Body Parsing</h2><h2 id="Parameter-Validation"><a href="#Parameter-Validation" class="headerlink" title="Parameter Validation"></a>Parameter Validation</h2><h2 id="Rate-Limiting"><a href="#Rate-Limiting" class="headerlink" title="Rate Limiting"></a>Rate Limiting</h2><h2 id="Vhost"><a href="#Vhost" class="headerlink" title="Vhost"></a>Vhost</h2><h2 id="Routing-and-Mounting"><a href="#Routing-and-Mounting" class="headerlink" title="Routing and Mounting"></a>Routing and Mounting</h2><h2 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h2><h2 id="File-Serving"><a href="#File-Serving" class="headerlink" title="File Serving"></a>File Serving</h2><h3 id="koa-static"><a href="#koa-static" class="headerlink" title="koa-static"></a>koa-static</h3><p>静态文件服务中间件,是<code>koa-send</code>的包装</p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-<span class="keyword">static</span></span><br></pre></td></tr></table></figure>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">API</span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="comment">//有点不同哦，还是看下面例子好了</span></span><br><span class="line">app.use(<span class="built_in">require</span>(<span class="string">'koa-static'</span>)(root, opts));</span><br></pre></td></tr></table></figure>
<ul>
<li><code>root</code> 根目录 String</li>
<li><code>opts</code> options object.</li>
</ul>
<h4 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h4><ul>
<li><code>maxage</code> 浏览cache的最大时间ms 默认 0</li>
<li><code>hidden</code> 允不允许改变隐藏文件. 默认 false</li>
<li><code>index</code> 默认文件名, 默认 ‘index.html’</li>
<li><code>defer</code> 如果为true, 在 <code>return next()</code>之后, 服务器允许任何一个downstream middleware 首先回应.</li>
<li><code>gzip</code> 当用户支持gzip格式, 并且.gz这种文件存在就行. 默认 true.</li>
<li><code>br</code> 同上 .br 格式存在时 (但要注意这个只用在https中). 默认 true.</li>
<li><code>setHeaders</code> Function to set custom headers on response.</li>
<li><code>extensions</code> 当在URL中没有匹配到扩展名时,那么会试着去从传过来的数组中匹配. 默认 false</li>
</ul>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">'koa-static'</span>);</span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"></span><br><span class="line"><span class="comment">// $ GET /package.json</span></span><br><span class="line">app.use(serve(<span class="string">'.'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// $ GET /hello.txt</span></span><br><span class="line">app.use(serve(<span class="string">'test/fixtures'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// or use absolute paths</span></span><br><span class="line">app.use(serve(__dirname + <span class="string">'/test/fixtures'</span>));</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'listening on port 3000'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="SPDY"><a href="#SPDY" class="headerlink" title="SPDY"></a>SPDY</h2><h2 id="HTTP2"><a href="#HTTP2" class="headerlink" title="HTTP2"></a>HTTP2</h2><h2 id="JSON-and-JSONP-Responses"><a href="#JSON-and-JSONP-Responses" class="headerlink" title="JSON and JSONP Responses"></a>JSON and JSONP Responses</h2><h2 id="Compression"><a href="#Compression" class="headerlink" title="Compression"></a>Compression</h2><h2 id="Caching"><a href="#Caching" class="headerlink" title="Caching"></a>Caching</h2><h2 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h2><h2 id="Sessions"><a href="#Sessions" class="headerlink" title="Sessions"></a>Sessions</h2><h2 id="Templating"><a href="#Templating" class="headerlink" title="Templating"></a>Templating</h2><h2 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h2><h2 id="CSS-Preprocessor"><a href="#CSS-Preprocessor" class="headerlink" title="CSS Preprocessor"></a>CSS Preprocessor</h2><h2 id="Livereload"><a href="#Livereload" class="headerlink" title="Livereload"></a>Livereload</h2><h2 id="Error-reporting"><a href="#Error-reporting" class="headerlink" title="Error reporting"></a>Error reporting</h2><h3 id="koa-onerror"><a href="#koa-onerror" class="headerlink" title="koa-onerror"></a>koa-onerror</h3><p>就是一个抓错误的处理器 for koa, <strong>hack</strong> ctx.onerror.<br>就是handle all errors, steams’ and events’ errors</p>
<p>比koa-error使用简单,且抓的错误多</p>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-onerror</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> onerror = <span class="built_in">require</span>(<span class="string">'koa-onerror'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> koa();</span><br><span class="line"><span class="comment">//这里就是使用咯</span></span><br><span class="line">onerror(app);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="params">ctx</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// foo();</span></span><br><span class="line">  ctx.body = fs.createReadStream(<span class="string">'not exist'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="Options-1"><a href="#Options-1" class="headerlink" title="Options"></a>Options</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onerror(app, options);</span><br></pre></td></tr></table></figure>
<ul>
<li>all: if options.all exist, ignore negotiation</li>
<li>text: text error handler</li>
<li>json: json error handler</li>
<li>html: html error handler</li>
<li>redirect: if accepct html, can redirect to another error page</li>
</ul>
<p>check out default handler to write your own handler.</p>
<h4 id="Status-and-Headers"><a href="#Status-and-Headers" class="headerlink" title="Status and Headers"></a>Status and Headers</h4><p><code>koa-onerror</code> will automatic set <code>err.status</code> as response status code, and <code>err.headers</code> as response headers.</p>
<h2 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h2><h3 id="koa-logger"><a href="#koa-logger" class="headerlink" title="koa-logger"></a>koa-logger</h3><p>Development <strong>style logger</strong> middleware for koa.</p>
<p><strong>注意: <code>koa-logger@2</code> 支持 <code>koa@2</code>; 如果你想在 <code>koa@1</code>中使用, 请使用 <code>koa-logger@1</code>.</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;-- GET /</span><br><span class="line">--&gt; GET / <span class="number">200</span> <span class="number">835</span>ms <span class="number">746</span>b</span><br><span class="line">&lt;-- GET /</span><br><span class="line">--&gt; GET / <span class="number">200</span> <span class="number">960</span>ms <span class="number">1.9</span>kb</span><br><span class="line">&lt;-- GET /users</span><br><span class="line">--&gt; GET /users <span class="number">200</span> <span class="number">357</span>ms <span class="number">922</span>b</span><br><span class="line">&lt;-- GET /users?page=<span class="number">2</span></span><br><span class="line">--&gt; GET /users?page=<span class="number">2</span> <span class="number">200</span> <span class="number">466</span>ms <span class="number">4.66</span>kb</span><br></pre></td></tr></table></figure>
<h4 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-logger</span><br></pre></td></tr></table></figure>
<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> logger = <span class="built_in">require</span>(<span class="string">'koa-logger'</span>)</span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line">app.use(logger())</span><br></pre></td></tr></table></figure>
<h4 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h4><p>Recommended that you <code>.use()</code> this middleware near the top to “wrap” all subsequent middleware.<br>就是在顺序上放最上面来<code>app.use(logger())</code></p>
<h2 id="Metrics"><a href="#Metrics" class="headerlink" title="Metrics"></a>Metrics</h2><h2 id="Analytics"><a href="#Analytics" class="headerlink" title="Analytics"></a>Analytics</h2><h2 id="i18n-or-L10n"><a href="#i18n-or-L10n" class="headerlink" title="i18n or L10n"></a>i18n or L10n</h2><h2 id="Response-Transformation"><a href="#Response-Transformation" class="headerlink" title="Response Transformation"></a>Response Transformation</h2><h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><h3 id="koa-convert"><a href="#koa-convert" class="headerlink" title="koa-convert"></a>koa-convert</h3><p>就是将只能在koa1中使用的middleware转换成koa2中能用的,当然也能反之咯.<strong>但注意有些不能转换</strong> 比如<code>koa-router</code></p>
<h4 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-convert</span><br></pre></td></tr></table></figure>
<h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>) <span class="comment">// koa v2.x</span></span><br><span class="line"><span class="keyword">const</span> convert = <span class="built_in">require</span>(<span class="string">'koa-convert'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="comment">//这是正常是用koa2的middleware</span></span><br><span class="line">app.use(modernMiddleware)</span><br><span class="line"><span class="comment">//这是使用koa2之前的版本,加上convert</span></span><br><span class="line">app.use(convert(legacyMiddleware))</span><br><span class="line"><span class="comment">//这是一起用,混合</span></span><br><span class="line">app.use(convert.compose(legacyMiddleware, modernMiddleware))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> * <span class="title">legacyMiddleware</span> (<span class="params">next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// before</span></span><br><span class="line">  <span class="keyword">yield</span> next</span><br><span class="line">  <span class="comment">// after</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">modernMiddleware</span> (<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// before</span></span><br><span class="line">  <span class="keyword">return</span> next().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// after</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="关于区分-legacy-and-modern-middleware"><a href="#关于区分-legacy-and-modern-middleware" class="headerlink" title="关于区分 legacy and modern middleware"></a>关于区分 legacy and modern middleware</h4><p>就一个意思,通过 <code>fn.constructor.name == &#39;GeneratorFunction&#39;</code>来判断版本.</p>
<h4 id="API-1"><a href="#API-1" class="headerlink" title="API"></a>API</h4><p>就3个,实现不管新版本还是旧版本都能使用middleware<br>一个将老的middleware转成新的,<br>一个混合老的和新的middleware都转成新的,<br>一个将新的middleware转成老的</p>
<ul>
<li>convert()</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modernMiddleware = convert(legacyMiddleware)</span><br></pre></td></tr></table></figure>
<ul>
<li>convert.compose()</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">composedModernMiddleware = convert.compose(legacyMiddleware, modernMiddleware)</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">composedModernMiddleware = convert.compose([legacyMiddleware, modernMiddleware])</span><br></pre></td></tr></table></figure>
<ul>
<li>convert.back()</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">legacyMiddleware = convert.back(modernMiddleware)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/strip-ansi是将转义码转换为原码/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/strip-ansi是将转义码转换为原码/" itemprop="url">strip-ansi是将转义码转换为原码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T19:14:13+08:00">2018-03-07</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/newbie项目/" itemprop="url" rel="index"><span itemprop="name">newbie项目</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="strip-ansi就是将转义后的符号复原"><a href="#strip-ansi就是将转义后的符号复原" class="headerlink" title="strip-ansi就是将转义后的符号复原"></a>strip-ansi就是将转义后的符号复原</h1><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install strip-ansi</span><br></pre></td></tr></table></figure>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stripAnsi = <span class="built_in">require</span>(<span class="string">'strip-ansi'</span>);</span><br><span class="line"></span><br><span class="line">stripAnsi(<span class="string">'\u001B[4mUnicorn\u001B[0m'</span>);</span><br><span class="line"><span class="comment">//=&gt; 'Unicorn'</span></span><br></pre></td></tr></table></figure>
<h2 id="Related"><a href="#Related" class="headerlink" title="Related"></a>Related</h2><ul>
<li>strip-ansi-cli - CLI for this module</li>
<li>has-ansi - Check if a string has ANSI escape codes</li>
<li>ansi-regex - Regular expression for matching ANSI escape codes</li>
<li>chalk - Terminal string styling done right</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/require-dir增强require的使用/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/require-dir增强require的使用/" itemprop="url">require-dir增强require的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T13:51:00+08:00">2018-03-07</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/newbie项目/" itemprop="url" rel="index"><span itemprop="name">newbie项目</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="require-dir-Helper-to-require-diretories"><a href="#require-dir-Helper-to-require-diretories" class="headerlink" title="require-dir Helper to require() diretories"></a>require-dir Helper to require() diretories</h1><p>本来require()只能读一个文件,现在用了这个后就能读取一个目录,当做一个对象就可以使用了</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>一个目录结构</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dir</span><br><span class="line">+ a.js</span><br><span class="line">+ b.json</span><br><span class="line">+ c.coffee</span><br><span class="line">+ d.txt</span><br></pre></td></tr></table></figure>
<p>在使用<code>requireDir(&#39;./dir&#39;)</code> 后将会返回:看不懂这个requireDir见下面使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//也可以看到这个只是名字,而不是扩展名也有,所以有options duplicate</span></span><br><span class="line">&#123; <span class="attr">a</span>: <span class="built_in">require</span>(<span class="string">'./dir/a.js'</span>)</span><br><span class="line">, <span class="attr">b</span>: <span class="built_in">require</span>(<span class="string">'./dir/b.json'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意这个package不是requireDir</span></span><br><span class="line">npm install <span class="built_in">require</span>-dir</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>基本使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> requireDir = <span class="built_in">require</span>(<span class="string">'require-dir'</span>)</span><br><span class="line"><span class="keyword">var</span> dir = requireDir(<span class="string">'./path/to/dir'</span>)</span><br></pre></td></tr></table></figure>
<p>自定义使用,增加参数options</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dir = requireDir(<span class="string">'./path/to/dir'</span>, &#123;<span class="attr">recurse</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><ul>
<li><code>recurse</code>: 是否在子文件夹中递归 <code>require()</code> . (node_modules 中的会被忽略.) 默认 false.</li>
<li><code>duplicates</code>: 默认预设的,如果多个文件有相同的名字(<strong>注意这个只看名字,不看扩展名</strong>),只有最高优先权的 <code>require()</code>‘d 会返回. (优先权通过<code>require.extensions</code> keys的顺序决定,如果 <code>recurse</code> is true那么文件夹的优先权大于文件.) Specifying this option <code>require()</code>‘s all files and returns full filename keys in addition to basename keys. 默认 false.</li>
</ul>
<p>例如.在上面那个例子中, 如果多了一个叫 <code>a.json</code>的, 那么结果还是一样, 但如果改了 <code>duplicates: true</code> 结果如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">a</span>: <span class="built_in">require</span>(<span class="string">'./dir/a.js'</span>)</span><br><span class="line">, <span class="string">'a.js'</span>: <span class="built_in">require</span>(<span class="string">'./dir/a.js'</span>)</span><br><span class="line">, <span class="string">'a.json'</span>: <span class="built_in">require</span>(<span class="string">'./dir/a.json'</span>) <span class="comment">//多了这个</span></span><br><span class="line">, <span class="attr">b</span>: <span class="built_in">require</span>(<span class="string">'./dir/b.json'</span>)</span><br><span class="line">, <span class="string">'b.json'</span>: <span class="built_in">require</span>(<span class="string">'./dir/b.json'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>filter</code>: 就是过滤器,在使用require前过滤夏文件名. 例如在生成环境中忽略dev开头的文件:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">requireDir(<span class="string">'./dir'</span>, &#123;</span><br><span class="line">  filter: <span class="function"><span class="keyword">function</span> (<span class="params">fullPath</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp; !fullPath.match(<span class="regexp">/$dev/</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>mapKey</code>: 在require-ing后对 module base name进行转换. 例如将  any module names 都大写:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">requireDir(<span class="string">'./dir'</span>, &#123;</span><br><span class="line">  mapKey: <span class="function"><span class="keyword">function</span> (<span class="params">value, baseName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseName.toUpperCase();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>mapValue</code>: 这个是对value. For example, uppercasing any text exported:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">requireDir(<span class="string">'./dir'</span>, &#123;</span><br><span class="line">  mapValue: <span class="function"><span class="keyword">function</span> (<span class="params">value, baseName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">'string'</span> ? value.toUpperCase() : value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>如果你想在多个文件中使用同一个文件夹下的 <code>require()</code> , 你就单独建一个 <code>index.js</code> 文件 然后如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="built_in">require</span>(<span class="string">'require-dir'</span>)();   <span class="comment">// defaults to '.'</span></span><br></pre></td></tr></table></figure>
<p>And don’t worry, the calling file is always ignored to prevent infinite loops.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/lru-cache最近最少使用缓存处理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/lru-cache最近最少使用缓存处理/" itemprop="url">lru_cache最近最少使用缓存处理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T11:12:20+08:00">2018-03-07</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/newbie项目/" itemprop="url" rel="index"><span itemprop="name">newbie项目</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="LRU是Least-Recently-Used-的缩写，翻译过来就是“最近最少使用”。"><a href="#LRU是Least-Recently-Used-的缩写，翻译过来就是“最近最少使用”。" class="headerlink" title="LRU是Least Recently Used 的缩写，翻译过来就是“最近最少使用”。"></a>LRU是Least Recently Used 的缩写，翻译过来就是“最近最少使用”。</h1><p>LRU缓存的处理方式如其命名，在固定的缓存空间下，把最近最少使用的数据移除，让给最新读取的数据。算法假设最常读取的数据一般也是访问次数最多的，尽力保留这部分数据可以提高cache的命中。</p>
<p><a href="https://npm.taobao.org/package/lru-cache" target="_blank" rel="noopener">lru-cache</a></p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>在保持几个从MongoDB中取出来的数据</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> LRU = <span class="built_in">require</span>(<span class="string">"lru-cache"</span>)</span><br><span class="line"><span class="comment">//默认接受max,下面的参数都是可选的</span></span><br><span class="line">otherCache = LRU(<span class="number">50</span>) <span class="comment">// sets just the max size</span></span><br><span class="line"></span><br><span class="line">options = &#123;</span><br><span class="line">    max: <span class="number">500</span>,</span><br><span class="line">    length: <span class="function"><span class="keyword">function</span> (<span class="params">n, key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n * <span class="number">2</span> + key.length</span><br><span class="line">        &#125;,</span><br><span class="line">    dispose: <span class="function"><span class="keyword">function</span> (<span class="params">key, n</span>) </span>&#123; </span><br><span class="line">        n.close() </span><br><span class="line">    &#125;,</span><br><span class="line">    maxAge: <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span></span><br><span class="line">&#125;</span><br><span class="line">cache = LRU(options)</span><br><span class="line"></span><br><span class="line">cache.set(<span class="string">"key"</span>, <span class="string">"value"</span>)</span><br><span class="line">cache.get(<span class="string">"key"</span>) <span class="comment">// "value"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// non-string keys ARE fully supported</span></span><br><span class="line"><span class="keyword">var</span> someObject = &#123;&#125;</span><br><span class="line">cache.set(someObject, <span class="string">'a value'</span>)</span><br><span class="line">cache.set(<span class="string">'[object Object]'</span>, <span class="string">'a different value'</span>)</span><br><span class="line">assert.equal(cache.get(someObject), <span class="string">'a value'</span>)</span><br><span class="line"></span><br><span class="line">cache.reset()    <span class="comment">// empty the cache</span></span><br></pre></td></tr></table></figure>
<p>当然要注意数据不能放太多,不然溢出</p>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><ul>
<li><code>max</code> cache的最大长度,使用length函数来对所有值检查合法性.必须设置,不然默认无穷大.</li>
<li><code>maxAge</code> 以ms为单位的最大逗留时间.</li>
<li><code>length</code> 这是一个Function用来计算 the length of stored items.<blockquote>
<p>你在存储 strings or buffers时, 你可能想要做如下 <code>function(n, key){return n.length}</code>. The default is <code>function(){return 1}</code>, 表示你存储大小规模是 <code>max</code> 那设置就没事. The item is passed as the first argument, and the key is passed as the second argumnet.</p>
</blockquote>
</li>
<li><code>dispose</code> 这个Function 是用来将items从cache中drop的. 当你关闭文件或做其他清除cache工作时,不需要用到这些items时可以使用. Called with <code>key, value</code>. 实际上是先call再把这个item是从内部cache中remove,如果你想立即put it back in, you’ll have to do that in a <code>nextTick</code> or <code>setTimeout</code> callback or it won’t do anything.</li>
<li><code>stale</code> By default, if you set a <code>maxAge</code>, 只有当你使用<code>get(key)</code> 他才会真正把 stale items 拉出cache . (也就是说在做<code>setTimeout</code> or <code>anything</code>前并不能做其他事.)<ol>
<li>如果你设置stale:true, 在你删除这个stale value前,他会返回给你.</li>
<li>如果你没有设置这个值, 那么当你试图get a stale entry,  他会返回undefined , 因为他已经被删除了</li>
</ol>
</li>
<li><code>noDisposeOnSet</code> By default, 如果你设置了 <code>dispose()</code> 方法,当你使用 <code>set()</code> 操作来重写一个已经存在的key时,他会被调用 If you set this option, <code>dispose()</code> will only be called when a key falls out of the cache, not when it is overwritten.</li>
</ul>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><ul>
<li><p>set(key, value, maxAge)</p>
</li>
<li><p>get(key) =&gt; value</p>
</li>
</ul>
<p>Both of these will update the “recently used”-ness of the key. They do what you think. <code>maxAge</code> is optional and overrides the cache <code>maxAge</code> option if provided.</p>
<p>If the key is not found, <code>get()</code> will return <code>undefined</code>.</p>
<p>The key and val can be any value.</p>
<ul>
<li>peek(key)</li>
</ul>
<p>Returns the key value (or <code>undefined</code> if not found) without updating the “recently used”-ness of the key.</p>
<p>(If you find yourself using this a lot, you might be using the wrong sort of data structure, but there are some use cases where it’s handy.)</p>
<ul>
<li>del(key)</li>
</ul>
<p>Deletes a key out of the cache.</p>
<ul>
<li>reset()</li>
</ul>
<p>Clear the cache entirely, throwing away all values.</p>
<ul>
<li>has(key)</li>
</ul>
<p>Check if a key is in the cache, without updating the recent-ness or deleting it for being stale.</p>
<ul>
<li>forEach(function(value,key,cache), [thisp])</li>
</ul>
<p>Just like <code>Array.prototype.forEach</code>. Iterates over all the keys in the cache, in order of recent-ness. (Ie, more recently used items are iterated over first.)</p>
<ul>
<li>rforEach(function(value,key,cache), [thisp])</li>
</ul>
<p>The same as <code>cache.forEach(...)</code> but items are iterated over in reverse order. (ie, less recently used items are iterated over first.)</p>
<ul>
<li>keys()</li>
</ul>
<p>Return an array of the keys in the cache.</p>
<ul>
<li>values()</li>
</ul>
<p>Return an array of the values in the cache.</p>
<ul>
<li>length</li>
</ul>
<p>Return total length of objects in cache taking into account length options function.</p>
<ul>
<li>itemCount</li>
</ul>
<p>Return total quantity of objects currently in cache. Note, that <code>stale</code> (see options) items are returned as part of this item count.</p>
<ul>
<li>dump()</li>
</ul>
<p>Return an array of the cache entries ready for serialization and usage with ‘destinationCache.load(arr)`.</p>
<ul>
<li>load(cacheEntriesArray)</li>
</ul>
<p>Loads another cache entries array, obtained with <code>sourceCache.dump()</code>, into the cache. The destination cache is reset before loading new entries</p>
<ul>
<li>prune()</li>
</ul>
<p>Manually iterates over the entire cache proactively pruning old entries</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/mongoose操作MongoDB数据库的模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Henry x">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatarMogu.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Little H title">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/mongoose操作MongoDB数据库的模块/" itemprop="url">mongoose操作MongoDB数据库的模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T10:16:54+08:00">2018-03-07</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/newbie项目/" itemprop="url" rel="index"><span itemprop="name">newbie项目</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="mongoose让你用js的方式来操纵mongodb数据库"><a href="#mongoose让你用js的方式来操纵mongodb数据库" class="headerlink" title="mongoose让你用js的方式来操纵mongodb数据库"></a>mongoose让你用js的方式来操纵mongodb数据库</h1><p><a href="https://www.cnblogs.com/bax-life/p/7795061.html" target="_blank" rel="noopener">入门</a></p>
<p><a href="http://mongoosejs.com/docs/index.html" target="_blank" rel="noopener">官网Quick Start</a></p>
<p>首先理下思路</p>
<ol>
<li>有个数据库叫mongodb</li>
<li>nodejs中有个模块叫mongoose</li>
<li>nodejs不通过shell命令行而是通过使用mongoose的API来控制mongodb</li>
</ol>
<h2 id="quick-start"><a href="#quick-start" class="headerlink" title="quick start"></a>quick start</h2><h3 id="安装mongoose"><a href="#安装mongoose" class="headerlink" title="安装mongoose"></a>安装mongoose</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongoose</span><br></pre></td></tr></table></figure>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>例子就是我们想在mongodb中创建一个叫test的数据库,然后再数据库中增加一个collection,这个collection中存入fuzzy kittens</p>
<p>这其实就对应着3块,Schemas，Models，Documents</p>
<h3 id="使用开始"><a href="#使用开始" class="headerlink" title="使用开始"></a>使用开始</h3><p>要在nodejs中使用mongoose,先得连接mongodb数据库.指的是在shell中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath d:/db</span><br></pre></td></tr></table></figure>
<p>不懂得话先看mongodb教程熟悉一下.然后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getting-started.js</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost:27017/test'</span>);</span><br></pre></td></tr></table></figure>
<p>当然这个test同mongodb那样,要存入数据口才能show dbs看到</p>
<p>接下来看看有没有连接成功</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost:27017/test'</span>, &#123; <span class="attr">useMongoClient</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> db = mongoose.connection;</span><br><span class="line"><span class="comment">//这里就是说连接成功的话会打印出coneect success,失败的话会打印出失败的信息</span></span><br><span class="line">db.on(<span class="string">'error'</span>, <span class="built_in">console</span>.error.bind(<span class="built_in">console</span>, <span class="string">'connection error:'</span>));</span><br><span class="line">db.once(<span class="string">'open'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'connect success'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>然后启动</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br></pre></td></tr></table></figure>
<p>接着连接成功,那么如何往MongoDB中存入数据呢,这个看例子,注意理清Schema,Model,Documents关系</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Schema,相当于规定好数据的属性</span></span><br><span class="line"><span class="keyword">var</span> kittySchema = mongoose.Schema(&#123;</span><br><span class="line">    name: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//这边还可以插入方法,但只能放这里哦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Model 依照上面那个大纲,实例化一个collection,Kitten在mongodb中会加上s</span></span><br><span class="line"><span class="keyword">var</span> Kitten = mongoose.model(<span class="string">'Kitten'</span>, kittySchema);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Documents,这里就是填入具体数据了</span></span><br><span class="line"><span class="keyword">var</span> silence = <span class="keyword">new</span> Kitten(&#123; <span class="attr">name</span>: <span class="string">'Silence'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据保存到数据库里面去，没有这一步，数据库是不会被建立的,下面有详细展开这个save参数</span></span><br><span class="line">silence.save();</span><br></pre></td></tr></table></figure>
<p>接着上面,除了规定属性外,当然还有方法咯(<strong>注意顺序</strong>)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给猫加个猫猫叫</span></span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> methods must be added to the schema before compiling it with mongoose.model()</span></span><br><span class="line">kittySchema.methods.speak = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> greeting = <span class="keyword">this</span>.name</span><br><span class="line">    ? <span class="string">"Meow name is "</span> + <span class="keyword">this</span>.name</span><br><span class="line">    : <span class="string">"I don't have a name"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(greeting);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是和上面一样的model</span></span><br><span class="line"><span class="keyword">var</span> Kitten = mongoose.model(<span class="string">'Kitten'</span>, kittySchema);</span><br><span class="line"><span class="comment">//这也是上面一样的,注意方法调用也很方便</span></span><br><span class="line"><span class="keyword">var</span> fluffy = <span class="keyword">new</span> Kitten(&#123; <span class="attr">name</span>: <span class="string">'fluffy'</span> &#125;);</span><br><span class="line">fluffy.speak(); <span class="comment">// "Meow name is fluffy"</span></span><br></pre></td></tr></table></figure>
<p>接下来就是保存到MongoDB数据库中了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将Documents存入MongoDB中去,第一个参数是error的callback</span></span><br><span class="line">fluffy.save(<span class="function"><span class="keyword">function</span> (<span class="params">err, fluffy</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">    fluffy.speak();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当然存入后还能查找所有kittens中的(find咯),和save一样的格式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Kitten.find(<span class="function"><span class="keyword">function</span> (<span class="params">err, kittens</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">  <span class="built_in">console</span>.log(kittens);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>过滤下查找结果,条件查找,查找所有name叫fluff的,然后通过callback返回一组array</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Kitten.find(&#123; <span class="attr">name</span>: <span class="regexp">/^fluff/</span> &#125;, callback);</span><br></pre></td></tr></table></figure>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatarMogu.jpg" alt="Henry x">
            
              <p class="site-author-name" itemprop="name">Henry x</p>
              <p class="site-description motion-element" itemprop="description">this is description</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">117</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">121</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yourname" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yourname@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://example.com/" title="weibo" target="_blank">weibo</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Henry x</span>

  

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.1"></script>



  



	





  





  










  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  

</body>
</html>
